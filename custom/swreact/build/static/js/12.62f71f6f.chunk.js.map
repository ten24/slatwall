{"version":3,"sources":["pages/Brand/BrandBanner.js","pages/Brand/Brand.js"],"names":["BrandBanner","brandName","imageFile","brandDescription","className","length","style","maxHeight","marginRight","customPath","src","alt","type","dangerouslySetInnerHTML","__html","Brand","props","brandRoute","useSelector","getBrandRoute","productTypeBase","state","configuration","filtering","path","location","pathname","split","reverse","loc","useLocation","params","queryString","parse","search","arrayFormat","arrayFormatSeparator","brandFilter","brand","history","useHistory","useGetEntity","brandResponse","setBrandRequest","useGetProductType","request","setRequest","productTypeUrl","useEffect","isFetching","isLoaded","urlTitle","brandUrlTitle","makeRequest","entity","Object","keys","data","to","listen","Helmet","title","settings","brandHTMLTitleString","showProducts","includeHome","crumbs","breadcrumbs","map","crumb","productTypeName","filter","stringify","key","childProductTypes","onSelect","push","Listing","preFilter","productType_id","productTypeID","hide"],"mappings":"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","file":"static/js/12.62f71f6f.chunk.js","sourcesContent":["import { SWImage } from '../../components'\nconst BrandBanner = ({ brandName, imageFile, brandDescription }) => {\n  return (\n    <div className=\"container\">\n      {/* Checking 'imageFile' length so that empty string does not get passed */}\n      {imageFile && imageFile.length > 5 ? <SWImage style={{ maxHeight: '150px', marginRight: '50px' }} customPath=\"/custom/assets/images/brand/logo/\" src={imageFile} alt={brandName} type=\"brand\" /> : <h1>{brandName}</h1>}\n      <p dangerouslySetInnerHTML={{ __html: brandDescription }} />\n    </div>\n  )\n}\n\nexport default BrandBanner\n","import { Layout, PageHeader, ProductTypeList } from '../../components'\nimport BrandBanner from './BrandBanner'\nimport ListingPage from '../../components/Listing/Listing'\nimport { Redirect, useHistory, useLocation } from 'react-router'\nimport { useGetEntity, useGetProductType } from '../../hooks/useAPI'\nimport { useSelector } from 'react-redux'\nimport queryString from 'query-string'\nimport { useEffect } from 'react'\nimport { Helmet } from 'react-helmet'\nimport { getBrandRoute } from '../../selectors/configurationSelectors'\n\nconst Brand = props => {\n  const brandRoute = useSelector(getBrandRoute)\n  const productTypeBase = useSelector(state => state.configuration.filtering.productTypeBase)\n\n  const path = props.location.pathname.split('/').reverse()\n  const loc = useLocation()\n  let params = queryString.parse(loc.search, { arrayFormat: 'separator', arrayFormatSeparator: ',' })\n  const brandFilter = {\n    brand: path[0],\n  }\n  const history = useHistory()\n  let [brandResponse, setBrandRequest] = useGetEntity()\n  const [request, setRequest] = useGetProductType()\n  const productTypeUrl = params['key'] || productTypeBase\n\n  useEffect(() => {\n    if (!request.isFetching && !request.isLoaded) {\n      setRequest({ ...request, isFetching: true, isLoaded: false, params: { urlTitle: productTypeUrl, brandUrlTitle: path[0] }, makeRequest: true })\n    }\n    if (!brandResponse.isFetching && !brandResponse.isLoaded) {\n      setBrandRequest({ ...brandResponse, isFetching: true, isLoaded: false, entity: 'brand', params: { 'f:urlTitle': path[0] }, makeRequest: true })\n    }\n  }, [request, setRequest, productTypeUrl, setBrandRequest, brandResponse, path])\n\n  if (!request.isFetching && request.isLoaded && Object.keys(request.data).length === 0) {\n    return <Redirect to=\"/404\" />\n  }\n  history.listen(location => {\n    params = queryString.parse(location.search, { arrayFormat: 'separator', arrayFormatSeparator: ',' })\n    setRequest({ ...request, data: {}, isFetching: true, isLoaded: false, params: { urlTitle: params['key'] || productTypeBase, brandUrlTitle: path[0] }, makeRequest: true })\n  })\n\n  return (\n    <Layout>\n      {brandResponse.isLoaded && brandResponse.data.length > 0 && <Helmet title={brandResponse.data[0].settings.brandHTMLTitleString} />}\n      {brandResponse.isLoaded && request.isLoaded && (\n        <PageHeader\n          title={!request.data.showProducts && request.data.title}\n          includeHome={true}\n          brand={params['key'] && [{ title: brandResponse.data[0].brandName, urlTitle: `/${brandRoute}/${brandResponse.data[0].urlTitle}` }]}\n          crumbs={request.data.breadcrumbs\n            .map(crumb => {\n              return { title: crumb.productTypeName, urlTitle: crumb.urlTitle }\n            })\n            .filter(crumb => crumb.urlTitle !== productTypeBase)\n            .filter(crumb => crumb.urlTitle !== productTypeUrl)\n            .map(crumb => {\n              return { ...crumb, urlTitle: `${loc.pathname}?${queryString.stringify({ key: crumb.urlTitle }, { arrayFormat: 'comma' })}` }\n            })}\n        >\n          {request.data.showProducts && <BrandBanner brandName={brandResponse.data[0].brandName} imageFile={brandResponse.data[0].imageFile} brandDescription={brandResponse.data[0].brandDescription} />}\n        </PageHeader>\n      )}\n      {brandResponse.isLoaded && request.data.childProductTypes?.length > 0 && (\n        <ProductTypeList\n          data={request.data}\n          onSelect={urlTitle => {\n            params['key'] = urlTitle\n            history.push(`${loc.pathname}?${queryString.stringify(params, { arrayFormat: 'comma' })}`)\n          }}\n        />\n      )}\n      {request.data.showProducts && <ListingPage preFilter={{ ...brandFilter, productType_id: request.data.productTypeID }} hide={['productType', 'brands']}></ListingPage>}\n    </Layout>\n  )\n}\n\nexport default Brand\n"],"sourceRoot":""}