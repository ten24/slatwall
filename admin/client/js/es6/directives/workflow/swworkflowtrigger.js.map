{"version":3,"sources":["directives/workflow/swworkflowtrigger.ts"],"names":[],"mappings":"AAAA,OAAO,CAAC,MAAM,CAAC,eAAe,CAAC,CAC9B,SAAS,CAAC,mBAAmB,EAAE;IAChC,MAAM;IACN,WAAW;IACX,iBAAiB;IACjB,sBAAsB;IACrB,UACA,IAAI,EACJ,SAAS,EACT,eAAe,EACf,oBAAoB;QAEnB,MAAM,CAAC;YACN,QAAQ,EAAE,GAAG;YACb,OAAO,EAAE,IAAI;YACb,KAAK,EAAC;gBACL,eAAe,EAAC,GAAG;gBACnB,gBAAgB,EAAC,GAAG;aACpB;YACD,WAAW,EAAC,oBAAoB,GAAC,sBAAsB;YACvD,IAAI,EAAE,UAAS,KAAK,EAAE,OAAO,EAAC,KAAK;gBAClC,IAAI,CAAC,KAAK,CAAC,uBAAuB,CAAC,CAAC;gBAEpC,AAGA;;mBADG;gBACH,KAAK,CAAC,qBAAqB,GAAG,UAAS,eAAe;oBACrD,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,CAAC;oBACrC,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC;oBACnB,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;oBAC5B,KAAK,CAAC,QAAQ,GAAG,KAAK,CAAC;oBACvB,KAAK,CAAC,gBAAgB,CAAC,eAAe,GAAG,SAAS,CAAC;oBAEnD,IAAI,uBAAuB,GAAG,SAAS,CAAC,mCAAmC,CAAC,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;oBACrI,uBAAuB,CAAC,IAAI,CAAC,UAAS,KAAK;wBAC1C,KAAK,CAAC,oBAAoB,GAAG;4BAC5B,cAAc,EAAG,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc;4BACxE,eAAe,EAAC,GAAG,GAAE,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc;yBAC5E,CAAC;wBACF,eAAe,CAAC,iBAAiB,CAAC,KAAK,EAAE,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;wBAClG,KAAK,CAAC,oBAAoB,CAAC,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,eAAe,CAAC,kCAAkC,CAAC,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;wBAClM,eAAe,CAAC,oBAAoB,CAAC,KAAK,CAAC,oBAAoB,CAAC,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,EAAE,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;wBACnL,KAAK,CAAC,gBAAgB,CAAC,eAAe,GAAG,eAAe,CAAC;oBAC1D,CAAC,CAAC,CAAC;gBACJ,CAAC,CAAC;gBAEF,AAGA;;mBADG;gBACH,KAAK,CAAC,YAAY,GAAG,UAAS,MAAM;oBACnC,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;oBAC5B,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;oBACnB,KAAK,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;gBAC7B,CAAC,CAAC;gBAEF,AAGA;;mBADG;gBACH,KAAK,CAAC,aAAa,GAAG,UAAS,eAAe;oBAC7C,IAAI,oBAAoB,GAAG,SAAS,CAAC,UAAU,CAAC,iBAAiB,EAAC,eAAe,CAAC,IAAI,CAAC,iBAAiB,EAAC,EAAE,EAAC,QAAQ,CAAC,CAAC;oBACtH,oBAAoB,CAAC,IAAI,CAAC,UAAS,KAAK;wBACvC,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,CAAC;wBAC5B,KAAK,CAAC,gBAAgB,CAAC,MAAM,CAAC,eAAe,CAAC,OAAO,EAAC,CAAC,CAAC,CAAC;oBAC1D,CAAC,CAAC,CAAC;gBACJ,CAAC,CAAC;gBAEF,AAGA;;mBADG;gBACH,KAAK,CAAC,SAAS,GAAG,UAAS,OAAO;oBACjC,EAAE,CAAA,CAAC,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAA,CAAC;wBACrE,OAAO,CAAC,MAAM,GAAC,KAAK,CAAC;oBACtB,CAAC;oBAAA,IAAI,CAAA,CAAC;wBACL,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE,wBAAwB,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC;wBACtE,OAAO,CAAC,MAAM,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC;oBAClC,CAAC;gBACF,CAAC,CAAC;YAGH,CAAC;SACD,CAAC;IACH,CAAC;CACD,CAAC,CAAC","file":"directives/workflow/swworkflowtrigger.js","sourceRoot":"/Users/ianhickey/Sites/Slatwall/","sourcesContent":["angular.module('slatwalladmin')\n.directive('swWorkflowTrigger', [\n'$log',\n'$slatwall',\n'metadataService',\n'workflowPartialsPath',\n\tfunction(\n\t$log,\n\t$slatwall,\n\tmetadataService,\n\tworkflowPartialsPath\n\t){\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\treplace: true,\n\t\t\tscope:{\n\t\t\t\tworkflowTrigger:\"=\",\n\t\t\t\tworkflowTriggers:\"=\"\n\t\t\t},\n\t\t\ttemplateUrl:workflowPartialsPath+\"workflowtrigger.html\",\n\t\t\tlink: function(scope, element,attrs){\n\t\t\t\t$log.debug('workflow trigger init');\n\t\t\t\t\n\t\t\t\t/**\n\t\t\t\t * Selects the current workflow trigger.\n\t\t\t\t */\n\t\t\t\tscope.selectWorkflowTrigger = function(workflowTrigger){\n\t\t\t\t\t$log.debug('SelectWorkflowTriggers');\n\t\t\t\t\tscope.done = false;\n\t\t\t\t\t$log.debug(workflowTrigger);\n\t\t\t\t\tscope.finished = false;\n\t\t\t\t\tscope.workflowTriggers.selectedTrigger = undefined;\n\t\t\t\t\t\n\t\t\t\t\tvar filterPropertiesPromise = $slatwall.getFilterPropertiesByBaseEntityName(scope.workflowTrigger.data.workflow.data.workflowObject);\n\t\t\t\t\tfilterPropertiesPromise.then(function(value){\n\t\t\t\t\t\tscope.filterPropertiesList = {\n\t\t\t\t\t\t\tbaseEntityName:\t\tscope.workflowTrigger.data.workflow.data.workflowObject,\n\t\t\t\t\t\t\tbaseEntityAlias:\"_\"+ scope.workflowTrigger.data.workflow.data.workflowObject\n\t\t\t\t\t\t};\n\t\t\t\t\t\tmetadataService.setPropertiesList(value, scope.workflowTrigger.data.workflow.data.workflowObject);\n\t\t\t\t\t\tscope.filterPropertiesList[scope.workflowTrigger.data.workflow.data.workflowObject] = metadataService.getPropertiesListByBaseEntityAlias(scope.workflowTrigger.data.workflow.data.workflowObject);\n\t\t\t\t\t\tmetadataService.formatPropertiesList(scope.filterPropertiesList[scope.workflowTrigger.data.workflow.data.workflowObject], scope.workflowTrigger.data.workflow.data.workflowObject);\n\t\t\t\t\t\tscope.workflowTriggers.selectedTrigger = workflowTrigger;\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t/**\n\t\t\t\t * Overrides the delete function for the confirmation modal. Delegates to the normal delete method.\n\t\t\t\t */\n\t\t\t\tscope.deleteEntity = function(entity){\n\t\t\t\t\t$log.debug(\"Delete Called\");\n\t\t\t\t\t$log.debug(entity);\n\t\t\t\t\tscope.deleteTrigger(entity);\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t/**\n\t\t\t\t * Hard deletes a workflow trigger\n\t\t\t\t */\n\t\t\t\tscope.deleteTrigger = function(workflowTrigger){\n\t\t\t\t\tvar deleteTriggerPromise = $slatwall.saveEntity('WorkflowTrigger',workflowTrigger.data.workflowTriggerID,{},'Delete');\n\t\t\t\t\tdeleteTriggerPromise.then(function(value){\n\t\t\t\t\t\t$log.debug('deleteTrigger');\n\t\t\t\t\t\tscope.workflowTriggers.splice(workflowTrigger.$$index,1);\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t/**\n\t\t\t\t * Sets the editing state to show/hide the edit screen.\n\t\t\t\t */\n\t\t\t\tscope.setHidden = function(trigger){\n\t\t\t\t\tif(!angular.isObject(trigger) || angular.isUndefined(trigger.hidden)){\n\t\t\t\t\t\ttrigger.hidden=false;\n\t\t\t\t\t}else{\n\t\t\t\t\t\t$log.debug(\"setHidden()\", \"Setting Hide Value To \" + !trigger.hidden);\n\t\t\t\t\t\ttrigger.hidden = !trigger.hidden;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t};\n\t}\n]);\n\t\n"]}