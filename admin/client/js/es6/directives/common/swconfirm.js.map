{"version":3,"sources":["directives/common/swconfirm.ts"],"names":[],"mappings":"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","file":"directives/common/swconfirm.js","sourceRoot":"/Users/ianhickey/Sites/Slatwall/","sourcesContent":["/**\n * <------------------------------------------------------------------------------------------------------------------------------------>\n *   This directive can be used to prompt the user with a confirmation dialog.\n *   \n *   Example Usage 1: \n *   <a swconfirm \n *   \t\t\t\t\t\tuse-rb-key=true \n * \t\t\t\t\t\t\tyes-text=\"define.yes\" \n * \t\t\t\t\t\t\tno-text=\"define.no\" \n * \t\t\t\t\t\t\tconfirm-text=\"define.confirm\" \n * \t\t\t\t\t\t\tmessage-text=\"define.delete.message\" \n * \t\t\t\t\t\t\tcallback=\"someFunction()\">\n *   </a>\n *   Alternate Version (No Rbkeys):\n *   <a swconfirm \n *   \t\t\t\t\t\tuse-rb-key=false \n * \t\t\t\t\t\t\tyes-text=\"Sure\" \n * \t\t\t\t\t\t\tno-text=\"Not Sure!\" \n * \t\t\t\t\t\t\tconfirm-text=\"Sure\" \n * \t\t\t\t\t\t\tmessage-text=\"Are you sure?\" \n * \t\t\t\t\t\t\tcallback=\"sure()\">\n *   </a>\n * \n *   Note: Because the template is dynamic, the following keywords can not be used anywhere in the text for this modal.\n *   \n *   [yes] [no] [confirm] [message] [callback]\n *   \n *   The above words in upper-case can be used - just not those words inside square brackets.\n *   Note: Your callback function on-confirm should return true;\n *<------------------------------------------------------------------------------------------------------------------------------------->\n */\nangular.module('slatwalladmin').directive('swConfirm', \n ['$slatwall', '$log','$compile','$modal','partialsPath',   \n    function($slatwall, $log, $compile, $modal, partialsPath){\n        \n    \t\tvar buildConfirmationModal = function( simple, useRbKey, confirmText, messageText, noText, yesText, callback){\n    \t\t\t\n    \t\t\t/* Keys */\n    \t\t\tvar confirmKey = \"[confirm]\";\n    \t\t\tvar messageKey = \"[message]\";\n    \t\t\tvar noKey = \"[no]\";\n    \t\t\tvar yesKey = \"[yes]\";\n    \t\t\tvar callbackKey = \"[callback]\";\n    \t\t\tvar swRbKey = \"sw-rbkey=\";\n    \t\t\t\n    \t\t\t/* Values */\n    \t\t\tvar confirmVal = \"<confirm>\";\n    \t\t\tvar messageVal = \"<message>\";\n    \t\t\tvar noVal = \"<no>\";\n    \t\t\tvar yesVal = \"<yes>\";\n    \t\t\tvar callbackVal = \"<callback>\";\n    \t\t\t\n    \t\t\t/* Parse Tags */\n    \t\t\tvar startTag = \"\\\"'\";\n    \t\t\tvar endTag = \"'\\\"\";\n    \t\t\tvar startParen = \"'\";\n    \t\t\tvar endParen = \"'\";\n    \t\t\tvar empty = \"\";\n    \t\t\t\n    \t\t\t/* Modal String */\n    \t\t\tvar parsedKeyString = \"\";\n    \t\t\tvar finishedString = \"\";\n    \t\t\t\n    \t\t\t//Figure out which version of this tag we are using\n    \t\t\t\n    \t\t\tvar templateString = \n                        \"<div>\" +\n                        \t\"<div class='modal-header'><a class='close' data-dismiss='modal' ng-click='cancel()'>Ã—</a><h3 [confirm]><confirm></h3></div>\" +\n                        \"<div class='modal-body' [message]>\" + \"<message>\" + \"</div>\" +\n                        \t\"<div class='modal-footer'>\" +\n                        \t\"<button class='btn btn-sm btn-default btn-inverse' ng-click='cancel()' [no]><no></button>\" +\n                        \t\"<button class='btn btn-sm btn-default btn-primary' ng-click='[callback]' [yes]><yes></button></div></div></div>\";\n    \t\t\t\t\n    \t\t\t\n    \t\t\t\n    \t\t\t/* Use RbKeys or Not? */\n    \t\t\tif (useRbKey === \"true\"){\n    \t\t\t\t$log.debug(\"Using RbKey? \" + useRbKey);\n    \t\t\t\t/* Then decorate the template with the keys. */\n    \t\t\t\tconfirmText \t\t\t= swRbKey + startTag + confirmText + endTag;\n    \t\t\t\tmessageText \t\t= swRbKey + startTag + messageText + endTag;\n    \t\t\t\tyesText \t\t\t\t= swRbKey + startTag + yesText + endTag;\n    \t\t\t\tnoText \t\t\t\t\t= swRbKey + startTag + noText + endTag;\n    \t\t\t\t\n    \t\t\t\tparsedKeyString \t= templateString.replace(confirmKey, confirmText)\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .replace(messageText, messageText)\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .replace(noKey, noText)\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .replace(yesKey, yesText)\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .replace(callback, callback);\n    \t\t\t\t$log.debug(finishedString);\n    \t\t\t\tfinishedString\t = parsedKeyString.replace(confirm, empty)\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .replace(messageVal, empty)\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .replace(noVal, empty)\n    \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .replace(yesVal, empty);\n    \t\t\t\t$log.debug(finishedString);\n    \t\t\t\treturn finishedString;\n        \t\t}else{\n        \t\t\t/* Then decorate the template without the keys. */\n        \t\t\t$log.debug(\"Using RbKey? \" + useRbKey);\n        \t\t\tparsedKeyString  = templateString.replace(confirmVal, confirmText)\n        \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .replace(messageVal, messageText)\n        \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .replace(noVal, noText)\n        \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t  .replace(yesVal, yesText)\n        \t\t\tfinishedString\t= parsedKeyString.replace(confirmKey, empty)\n        \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .replace(messageKey, empty)\n        \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .replace(noKey, empty)\n        \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .replace(yesKey, empty)\n        \t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t .replace(callbackKey, callback);\n        \t\t\t$log.debug(finishedString);\n        \t\t\treturn finishedString;\n        \t\t}\n    \t\t};\n        return {\n        \t\trestrict: 'EA',\n        \t\tscope: {\n        \t          callback:\"&\",\n        \t          entity:\"=\"\n        \t        },\n            link: function (scope, element, attr) {\n            \t/* Grab the template and build the modal on click */\n            $log.debug(\"Modal is: \");\n            $log.debug($modal);\n            \telement.bind('click', function() {\n            \t\t\t/* Default Values */\n                \t   \tvar useRbKey = attr.useRbKey   \t\t\t\t\t\t|| \"false\";\n                \t   \tvar simple = attr.simple\t\t\t\t\t\t\t\t\t||  false;\n                \t   \tvar yesText = attr.yesText\t\t\t\t\t\t\t\t\t|| \"define.yes\";\n                \t   \tvar noText  = attr.noText  \t\t\t\t\t\t\t\t|| \"define.no\";\n                    var confirmText = attr.confirmText \t\t\t\t\t|| \"define.delete\";\n                    var messageText = attr.messageText\t\t\t\t|| \"define.delete_message\";\n                    var callback = attr.callback    \t\t\t\t\t\t\t|| \"onSuccess()\";\n                    var templateString = buildConfirmationModal(simple, useRbKey, confirmText, messageText, noText, yesText, callback);\n                      \n                    var modalInstance = $modal.open({\n                      template: templateString,\n                      controller: 'confirmationController'\n                    });\n                    \n                    /**\n                     * Handles the result - callback or dismissed\n                     */\n                    modalInstance.result.then(function(result) {\n                        $log.debug(\"Result:\" + result);\n                    \t\tscope.callback();\n                    \t\treturn true;\n                    }, function() {\n                        //There was an error\n                 }); \n             });//<--end bind \t\n           }  \n        };\n}]);\n\n\t"]}