{"version":3,"sources":["directives/workflow/swworkflowcondition.ts"],"names":[],"mappings":"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","file":"directives/workflow/swworkflowcondition.js","sourceRoot":"/Users/david/Sites/Slatwall/","sourcesContent":["angular.module('slatwalladmin')\n.directive('swWorkflowCondition', [\n'$log',\n'$location',\n'$slatwall',\n'formService',\n'metadataService',\n'workflowPartialsPath',\n\tfunction(\n\t$log,\n\t$location,\n\t$slatwall,\n\tformService,\n\tmetadataService,\n\tworkflowPartialsPath\n\t){\n\t\treturn {\n\t\t\trestrict: 'E',\n\t\t\tscope:{\n\t\t\t\tworkflowCondition:\"=\", \n\t\t\t\tworkflowConditionIndex:\"=\",\n\t\t\t\tworkflow:\"=\",\n\t\t\t\tfilterPropertiesList:\"=\"\n\t\t\t},\n\t\t\ttemplateUrl:workflowPartialsPath+\"workflowcondition.html\",\n\t\t\tlink: function(scope, element,attrs){\n\t\t\t\t$log.debug('workflowCondition init');\n\t\t\t\t$log.debug(scope);\n\t\t\t\t\n\t\t\t\tscope.selectBreadCrumb = function(breadCrumbIndex){\n\t\t\t\t\t//splice out array items above index\n\t\t\t\t\tvar removeCount = scope.filterItem.breadCrumbs.length - 1 - breadCrumbIndex;\n\t\t\t\t\tscope.filterItem.breadCrumbs.splice(breadCrumbIndex + 1,removeCount);\n\t\t\t\t\tscope.selectedFilterPropertyChanged(null);\n\t\t\t\t\t\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tscope.selectedFilterPropertyChanged = function(selectedFilterProperty){\n\t\t\t\t\t$log.debug('selectedFilterProperty');\n\t\t\t\t\t$log.debug(selectedFilterProperty);\n\t\t\t\t\t\n\t\t\t\t\tscope.selectedFilterProperty = selectedFilterProperty;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tif(angular.isUndefined(scope.workflowCondition.breadCrumbs)){\n\t\t\t\t\tscope.workflowCondition.breadCrumbs = [];\n\t\t\t\t\tif(scope.workflowCondition.propertyIdentifier === \"\"){\n\t\t\t\t\t\t\n\t\t\t\t\t\tscope.workflowCondition.breadCrumbs = [\n\t\t\t\t\t\t                     \t{\n\t\t\t\t\t\t                     \t\tentityAlias:scope.workflow.data.workflowObject,\n\t\t\t\t\t\t                     \t\tcfc:scope.workflow.data.workflowObject,\n\t\t\t\t\t\t                     \t\tpropertyIdentifier:scope.workflow.data.workflowObject\n\t\t\t\t\t\t                     \t}\n\t\t\t\t\t\t                    ];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tvar entityAliasArrayFromString = scope.workflowCondition.propertyIdentifier.split('.');\n\t\t\t\t\t\tentityAliasArrayFromString.pop();\n\t\t\t\t\t\tfor(var i in entityAliasArrayFromString){\n\t\t\t\t\t\t\tvar breadCrumb = {\n\t\t\t\t\t\t\t\t\tentityAlias:entityAliasArrayFromString[i],\n\t\t\t\t\t\t\t\t\tcfc:entityAliasArrayFromString[i],\n\t\t\t\t\t\t\t\t\tpropertyIdentifier:entityAliasArrayFromString[i]\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tscope.workflowCondition.breadCrumbs.push(breadCrumb);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tangular.forEach(scope.workflowCondition.breadCrumbs,function(breadCrumb,key){\n\t\t\t\t\t\tif(angular.isUndefined(scope.filterPropertiesList[breadCrumb.propertyIdentifier])){\n\t\t\t\t\t\t\tvar filterPropertiesPromise = $slatwall.getFilterPropertiesByBaseEntityName(breadCrumb.cfc);\n\t\t\t\t\t\t\tfilterPropertiesPromise.then(function(value){\n\t\t\t\t\t\t\t\tmetadataService.setPropertiesList(value,breadCrumb.propertyIdentifier);\n\t\t\t\t\t\t\t\tscope.filterPropertiesList[breadCrumb.propertyIdentifier] = metadataService.getPropertiesListByBaseEntityAlias(breadCrumb.propertyIdentifier);\n\t\t\t\t\t\t\t\tmetadataService.formatPropertiesList(scope.filterPropertiesList[breadCrumb.propertyIdentifier],breadCrumb.propertyIdentifier);\n\t\t\t\t\t\t\t\tvar entityAliasArrayFromString = scope.workflowCondition.propertyIdentifier.split('.');\n\t\t\t\t\t\t\t\tentityAliasArrayFromString.pop();\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tentityAliasArrayFromString = entityAliasArrayFromString.join('.').trim();\n\t\t\t\t\t\t\t\tif(angular.isDefined(scope.filterPropertiesList[entityAliasArrayFromString])){\n\t\t\t\t\t\t\t\t\tfor(var i in scope.filterPropertiesList[entityAliasArrayFromString].data){\n\t\t\t\t\t\t\t\t\t\tvar filterProperty = scope.filterPropertiesList[entityAliasArrayFromString].data[i];\n\t\t\t\t\t\t\t\t\t\tif(filterProperty.propertyIdentifier === scope.workflowCondition.propertyIdentifier){\n\t\t\t\t\t\t\t\t\t\t\t//selectItem from drop down\n\t\t\t\t\t\t\t\t\t\t\tscope.selectedFilterProperty = filterProperty;\n\t\t\t\t\t\t\t\t\t\t\t//decorate with value and comparison Operator so we can use it in the Condition section\n\t\t\t\t\t\t\t\t\t\t\tscope.selectedFilterProperty.value = scope.workflowCondition.value;\n\t\t\t\t\t\t\t\t\t\t\tscope.selectedFilterProperty.comparisonOperator = scope.workflowCondition.comparisonOperator;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tvar entityAliasArrayFromString = scope.workflowCondition.propertyIdentifier.split('.');\n\t\t\t\t\t\t\tentityAliasArrayFromString.pop();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tentityAliasArrayFromString = entityAliasArrayFromString.join('.').trim();\n\t\t\t\t\t\t\tif(angular.isDefined(scope.filterPropertiesList[entityAliasArrayFromString])){\n\t\t\t\t\t\t\t\tfor(var i in scope.filterPropertiesList[entityAliasArrayFromString].data){\n\t\t\t\t\t\t\t\t\tvar filterProperty = scope.filterPropertiesList[entityAliasArrayFromString].data[i];\n\t\t\t\t\t\t\t\t\tif(filterProperty.propertyIdentifier === scope.workflowCondition.propertyIdentifier){\n\t\t\t\t\t\t\t\t\t\t//selectItem from drop down\n\t\t\t\t\t\t\t\t\t\tscope.selectedFilterProperty = filterProperty;\n\t\t\t\t\t\t\t\t\t\t//decorate with value and comparison Operator so we can use it in the Condition section\n\t\t\t\t\t\t\t\t\t\tscope.selectedFilterProperty.value = scope.workflowCondition.value;\n\t\t\t\t\t\t\t\t\t\tscope.selectedFilterProperty.comparisonOperator = scope.workflowCondition.comparisonOperator;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n]);\n\t\n"]}