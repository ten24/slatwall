{"version":3,"sources":["directives/content/swcontentnode.ts"],"names":[],"mappings":"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","file":"directives/content/swcontentnode.js","sourcesContent":["'use strict';\n\nangular.module('slatwalladmin')\n    .directive('swContentNode', [\n            '$log',\n            '$compile',\n            '$slatwall',\n            'partialsPath',\n            function(\n                $log,\n                $compile,\n                $slatwall,\n                partialsPath\n            ) {\n                return {\n                    restrict: 'A',\n                    scope:{\n                        contentData:'=',\n                        loadChildren:\"=\"\n                    },\n                    templateUrl: partialsPath + 'content/contentnode.html',\n                    link: function(scope, element, attr) {\n                        if(angular.isUndefined(scope.depth)){\n                            scope.depth = 0;\n                        }\n                        \n                        if(angular.isDefined(scope.$parent.depth)){\n                            scope.depth = scope.$parent.depth+1;\n                        }\n                        \n                        var childContentColumnsConfig = [{\n                                propertyIdentifier: '_content.contentID',\n                                isVisible: false,\n                                isSearchable: false\n                            }, \n                            {\n                                propertyIdentifier: '_content.title',\n                                isVisible: true,\n                                isSearchable: true\n                            },\n                            {\n                                propertyIdentifier: '_content.site.siteID',\n                                isVisible: false,\n                                isSearchable: false\n                            },\n                            {\n                                propertyIdentifier: '_content.site.siteName',\n                                isVisible: true,\n                                isSearchable: true\n                            }, {\n                                propertyIdentifier: '_content.contentTemplateFile',\n                                persistent: false,\n                                setting: true,\n                                isVisible: true\n                            },\n                            //need to get template via settings\n                            {\n                                propertyIdentifier: '_content.allowPurchaseFlag',\n                                isVisible: true,\n                                isSearchable: true\n                            }, {\n                                propertyIdentifier: '_content.productListingPageFlag',\n                                isVisible: true,\n                                isSearchable: true\n                            }, {\n                                propertyIdentifier: '_content.activeFlag',\n                                isVisible: true,\n                                isSearchable: true\n                            }\n                        ];\n                        \n                        var childContentOrderBy = [\n                            {\n                                \"propertyIdentifier\":\"_content.sortOrder\",\n                                \"direction\":\"DESC\"\n                            }\n                        ];\n                       \n\n                        scope.getChildContent = function(parentContentRecord) {\n                            \n                            if(angular.isUndefined(scope.childOpen) || scope.childOpen === false){\n                                scope.childOpen = true;\n                                 var childContentfilterGroupsConfig = [{\n                                    \"filterGroup\": [{\n                                        \"propertyIdentifier\": \"_content.parentContent.contentID\",\n                                        \"comparisonOperator\": \"=\",\n                                        \"value\": parentContentRecord.contentID\n                                    }]\n                                }];\n     \n                                var collectionListingPromise = $slatwall.getEntity('Content', {\n                                    columnsConfig: angular.toJson(childContentColumnsConfig),\n                                    filterGroupsConfig: angular.toJson(childContentfilterGroupsConfig),\n                                    orderByConfig: angular.toJson(childContentOrderBy),\n                                    allRecords: true\n                                });\n                                collectionListingPromise.then(function(value) {\n                                    parentContentRecord.children = value.records;\n                                    var index = 0;\n                                    angular.forEach(parentContentRecord.children,function(child){\n                                        scope['child'+index] = child;\n                                        element.after($compile('<tr class=\"childNode\" style=\"margin-left:{{depth*15||0}}px\"  sw-content-node data-content-data=\"child'+index+'\"></tr>')(scope));\n                                        index++;\n                                    });\n                                });\n                            }\n                        }\n                            \n                        if(angular.isDefined(scope.loadChildren) && scope.loadChildren === true){\n                            scope.getChildContent(scope.contentData);    \n                        }\n\n                    }\n                }\n\n            }]);"],"sourceRoot":"/source/"}