{"version":3,"sources":["pages/ProductDetail/ProductPageHeader.js","pages/ProductDetail/ProductDetailGallery.js","pages/ProductDetail/ProductPagePanels.js","pages/ProductDetail/ProductPageContent.js","pages/ProductDetail/ProductDetailSlider.js","pages/ProductDetail/ProductDetail.js"],"names":["ProductPageHeader","title","className","ProductDetailGallery","productID","skuID","imageFile","useGetProductImageGallery","productImageGallery","setRequest","useState","nav1","nav2","sliders","setSliders","slider1","useRef","slider2","useEffect","current","isLoaded","isFetching","params","makeRequest","filterImages","data","images","filter","ASSIGNEDSKUIDLIST","TYPE","includes","length","ORIGINALPATH","NAME","unshift","splice","findIndex","item","ORIGINALFILENAME","id","arrows","asNavFor","ref","slider","map","customPath","src","alt","style","maxWidth","infinite","slidesToShow","swipeToSlide","focusOnSelect","propertyBlackList","ProductPagePanels","product","attributeSets","t","useTranslation","filteredAttributeSets","set","attributes","attr","attributeCode","sort","a","b","sortOrder","href","attributeSetCode","role","data-toggle","aria-expanded","aria-controls","attributeSetName","data-parent","attributeName","margin","padding","isBoolean","booleanToString","to","OptionLoader","props","speed","width","height","viewBox","backgroundColor","foregroundColor","x","y","rx","ry","SkuOptions","skuOptionDetails","availableSkuOptions","sku","optionCode","optionGroupCode","lastOption","setLastOption","loc","useLocation","history","useHistory","queryString","parse","search","arrayFormat","arrayFormatSeparator","Object","keys","entries","filteredOptions","forEach","filteredOption","options","option","active","optionID","calculateOptions","forceSelcted","optionGroup","selectedOptions","JSON","stringify","skuid","console","log","push","pathname","cals","skuIdsToSkuCodes","selectedOptionIDList","assign","optionGroupName","optionGroupID","selectedOptionCode","htmlFor","required","value","onChange","e","selectedOption","flat","shift","getOptionByCode","target","setOption","optionName","ProductPageContent","productOptions","dispatch","useDispatch","cart","useSelector","state","quantity","setQuantity","productClearance","productName","skuCode","dangerouslySetInnerHTML","__html","productDescription","onSubmit","event","preventDefault","addToCart","window","scrollTo","top","behavior","salePrice","price","listPrice","calculatedQATS","Array","index","disabled","type","ProductDetailSlider","products","err","relatedProducts","setRelatedProducts","didCancel","SlatwalApiService","getRelatedProducts","then","response","isSuccess","newProducts","success","renameKeysInArrayOfObjects","ProductSlider","sliderData","skuCodesToSkuIds","productOptionGroups","parsedOptions","optCount","join","ProductDetail","useGetProductAvailableSkuOptions","skuOptions","getSkuOptionsRequest","useGetEntity","newproduct","getPublicProduct","location","path","setPath","idList","defaultSelectedOptions","optionGroups","payload","listen","urlTitle","split","reverse","entity","productSeries","Helmet","settings","productHTMLTitleString"],"mappings":"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","file":"static/js/19.084e44d4.chunk.js","sourcesContent":["import { BreadCrumb } from '../../components'\n\nconst ProductPageHeader = ({ title = '' }) => {\n  return (\n    <div className=\"page-title-overlap bg-lightgray pt-4\">\n      <div className=\"container d-lg-flex justify-content-between py-2 py-lg-3\">\n        <div className=\"order-lg-2 mb-3 mb-lg-0 pt-lg-2\">\n          <BreadCrumb />\n        </div>\n        <div className=\"order-lg-1 pr-lg-4 text-center text-lg-left\">\n          <h1 className=\"h3 text-dark mb-0 font-accent\">{title}</h1>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ProductPageHeader\n","import React, { useEffect, useRef, useState } from 'react'\nimport Slider from 'react-slick'\nimport { SWImage } from '../../components'\nimport { useGetProductImageGallery } from '../../hooks/useAPI'\n\n/*\n\nProbably should move to this eventually \nhttps://react-slick.neostack.com/docs/example/custom-paging\n*/\nconst ProductDetailGallery = ({ productID, skuID, imageFile }) => {\n  let [productImageGallery, setRequest] = useGetProductImageGallery()\n  const [sliders, setSliders] = useState({\n    nav1: null,\n    nav2: null,\n  })\n  const slider1 = useRef()\n  const slider2 = useRef()\n\n  useEffect(() => {\n    setSliders({\n      nav1: slider1.current,\n      nav2: slider2.current,\n    })\n    if (!productImageGallery.isLoaded && !productImageGallery.isFetching) {\n      setRequest({ ...productImageGallery, isFetching: true, isLoaded: false, params: { productID }, makeRequest: true })\n    }\n  }, [productImageGallery, setRequest, productID])\n  let filterImages = productImageGallery.isLoaded\n    ? productImageGallery.data.images.filter(({ ASSIGNEDSKUIDLIST = false, TYPE }) => {\n        return TYPE === 'skuDefaultImage' || (ASSIGNEDSKUIDLIST && ASSIGNEDSKUIDLIST.includes(skuID))\n      })\n    : []\n  if (filterImages.length === 0) {\n    filterImages = [{ ORIGINALPATH: '', NAME: '' }]\n  }\n  filterImages.unshift(\n    filterImages.splice(\n      filterImages.findIndex(item => item.ORIGINALFILENAME === imageFile),\n      1\n    )[0]\n  )\n\n  return (\n    <div className=\"col-lg-6 pr-lg-5 pt-0\">\n      <div className=\"cz-product-gallery\">\n        <div className=\"cz-preview order-sm-2\">\n          <div className=\"cz-preview-item active\" id=\"first\">\n            <div>\n              <Slider arrows={false} asNavFor={sliders.nav2} ref={slider => (slider1.current = slider)}>\n                {productImageGallery.isLoaded &&\n                  filterImages.map(({ ORIGINALPATH, NAME }) => {\n                    return <SWImage key={NAME} customPath=\"/\" src={ORIGINALPATH} className=\"cz-image-zoom w-100 mx-auto\" alt=\"Product\" style={{ maxWidth: '500px' }} />\n                  })}\n              </Slider>\n            </div>\n            <div className=\"cz-image-zoom-pane\"></div>\n          </div>\n        </div>\n      </div>\n      <div className=\"cz-product-gallery\">\n        <div className=\"cz-preview order-sm-2\">\n          <div className=\"cz-preview-item active\" id=\"first\">\n            <div>\n              {filterImages.length > 1 && (\n                <Slider arrows={false} infinite={filterImages.length > 3} asNavFor={sliders.nav1} ref={slider => (slider2.current = slider)} slidesToShow={3} swipeToSlide={true} focusOnSelect={true}>\n                  {productImageGallery.isLoaded &&\n                    filterImages.map(({ ORIGINALPATH, NAME }) => {\n                      return <SWImage key={NAME} customPath=\"/\" src={ORIGINALPATH} className=\"cz-image-zoom w-100 mx-auto\" alt=\"Product\" style={{ maxWidth: '100px' }} />\n                    })}\n                </Slider>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\nexport default ProductDetailGallery\n","import { useTranslation } from 'react-i18next'\nimport { Link } from 'react-router-dom'\nimport { isBoolean, booleanToString } from '../../utils'\n\nconst propertyBlackList = ['productID', 'productName', 'productCode', 'productFeatured', 'productDisplay']\n\n// TODO: Migrate to reactstrap accordion\nconst ProductPagePanels = ({ product = {}, attributeSets = [] }) => {\n  const { t } = useTranslation()\n\n  const filteredAttributeSets = attributeSets\n    .map(set => {\n      return { ...set, attributes: set.attributes.filter(attr => attr.attributeCode in product && !propertyBlackList.includes(attr.attributeCode) && product[attr.attributeCode] !== ' ').sort((a, b) => a.sortOrder - b.sortOrder) }\n    })\n    .filter(set => set.attributes.length)\n\n  return (\n    <div className=\"accordion mb-4\" id=\"productPanels\">\n      {filteredAttributeSets.map(set => {\n        return (\n          <div key={set.attributeSetCode} className=\"card\">\n            <div className=\"card-header\">\n              <h3 className=\"accordion-heading\">\n                <a href={`#${set.attributeSetCode}`} role=\"button\" data-toggle=\"collapse\" aria-expanded=\"true\" aria-controls={set.attributeSetCode}>\n                  <i className=\"far fa-key font-size-lg align-middle mt-n1 mr-2\"></i>\n                  {set.attributeSetName}\n                  <span className=\"accordion-indicator\"></span>\n                </a>\n              </h3>\n            </div>\n            <div className=\"collapse show\" id={set.attributeSetCode} data-parent=\"#productPanels\">\n              <div className=\"card-body font-size-sm\">\n                {set.attributes.map(({ attributeName, attributeCode }) => {\n                  return (\n                    <div className=\"font-size-sm row\">\n                      <div className=\"col-6\">\n                        <ul style={{ margin: 0, padding: 0 }}>{attributeName}</ul>\n                      </div>\n                      <div className=\"col-6 text-muted\">\n                        <ul style={{ margin: 0, padding: 0 }}>{isBoolean(product[attributeCode]) ? booleanToString(product[attributeCode]) : product[attributeCode]}</ul>\n                      </div>\n                    </div>\n                  )\n                })}\n              </div>\n            </div>\n          </div>\n        )\n      })}\n      {/* <div className=\"card\">\n        <div className=\"card-header\">\n          <h3 className=\"accordion-heading\">\n            <a className=\"collapsed\" href=\"#technicalinfo\" role=\"button\" data-toggle=\"collapse\" aria-expanded=\"true\" aria-controls=\"technicalinfo\">\n              <i className=\"far fa-drafting-compass align-middle mt-n1 mr-2\"></i>\n              Technical Info<span className=\"accordion-indicator\"></span>\n            </a>\n          </h3>\n        </div>\n        <div className=\"collapse\" id=\"technicalinfo\" data-parent=\"#productPanels\">\n          <div className=\"card-body font-size-sm\">\n            <div className=\"d-flex justify-content-between border-bottom py-2\">\n              <div className=\"font-weight-semibold text-dark\">Document Title</div>\n              <a href=\"?=doc\">Download</a>\n            </div>\n            <div className=\"d-flex justify-content-between border-bottom py-2\">\n              <div className=\"font-weight-semibold text-dark\">Document Title</div>\n              <a href=\"?=doc\">Download</a>\n            </div>\n          </div>\n        </div>\n      </div> */}\n\n      <div className=\"card\">\n        <div className=\"card-header\">\n          <h3 className=\"accordion-heading\">\n            <a className=\"collapsed\" href=\"#questions\" role=\"button\" data-toggle=\"collapse\" aria-expanded=\"true\" aria-controls=\"questions\">\n              <i className=\"far fa-question-circle font-size-lg align-middle mt-n1 mr-2\"></i>\n              {t('frontend.product.questions.heading')}\n              <span className=\"accordion-indicator\"></span>\n            </a>\n          </h3>\n        </div>\n        <div className=\"collapse\" id=\"questions\" data-parent=\"#productPanels\">\n          <div className=\"card-body\">\n            <p>{t('frontend.product.questions.detail')}</p>\n            <Link to=\"/contact\">{t('frontend.nav.contact')}</Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default ProductPagePanels\n","import ProductDetailGallery from './ProductDetailGallery'\nimport ProductPagePanels from './ProductPagePanels'\nimport { useEffect, useState } from 'react'\nimport { addToCart } from '../../actions/cartActions'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { HeartButton, ProductPrice } from '../../components'\nimport { useTranslation } from 'react-i18next'\nimport queryString from 'query-string'\nimport { useHistory, useLocation } from 'react-router'\nimport ContentLoader from 'react-content-loader'\nimport { skuIdsToSkuCodes } from '../../utils'\n\nconst OptionLoader = props => (\n  <ContentLoader speed={2} width={400} height={150} viewBox=\"0 0 400 200\" backgroundColor=\"#f3f3f3\" foregroundColor=\"#ecebeb\" {...props}>\n    <rect x=\"25\" y=\"15\" rx=\"5\" ry=\"5\" width=\"350\" height=\"20\" />\n    <rect x=\"25\" y=\"45\" rx=\"5\" ry=\"5\" width=\"350\" height=\"10\" />\n    <rect x=\"25\" y=\"60\" rx=\"5\" ry=\"5\" width=\"350\" height=\"10\" />\n    <rect x=\"26\" y=\"75\" rx=\"5\" ry=\"5\" width=\"350\" height=\"10\" />\n    <rect x=\"27\" y=\"107\" rx=\"5\" ry=\"5\" width=\"350\" height=\"20\" />\n    <rect x=\"26\" y=\"135\" rx=\"5\" ry=\"5\" width=\"350\" height=\"10\" />\n    <rect x=\"26\" y=\"150\" rx=\"5\" ry=\"5\" width=\"350\" height=\"10\" />\n    <rect x=\"27\" y=\"165\" rx=\"5\" ry=\"5\" width=\"350\" height=\"10\" />\n  </ContentLoader>\n)\n\nconst ProductPageContent = ({ product, attributeSets, skuID, sku, productOptions = [], availableSkuOptions = '', isFetching = false }) => {\n  const dispatch = useDispatch()\n  const { t } = useTranslation()\n  const cart = useSelector(state => state.cart)\n  const [quantity, setQuantity] = useState(1)\n  return (\n    <div className=\"container bg-light box-shadow-lg rounded-lg px-4 py-3 mb-5\">\n      <div className=\"px-lg-3\">\n        <div className=\"row\">\n          <ProductDetailGallery productID={product.productID} skuID={skuID} />\n          {/* <!-- Product details--> */}\n          <div className=\"col-lg-6 pt-0\">\n            <div className=\"product-details pb-3\">\n              <div className=\"d-flex justify-content-between align-items-center mb-2\">\n                <span className=\"d-inline-block font-size-sm align-middle px-2 bg-primary text-light\"> {product.productClearance === true && ' On Special'}</span>\n                {skuID && <HeartButton skuID={skuID} className={'btn-wishlist mr-0 mr-lg-n3'} />}\n              </div>\n              <h2 className=\"h4 mb-2\">{product.productName}</h2>\n              <div className=\"mb-2\">\n                <span className=\"text-small text-muted\">{`SKU: `}</span>\n                {sku && <span className=\"font-weight-normal text-large text-accent mr-1\">{sku.skuCode}</span>}\n              </div>\n              <div\n                className=\"mb-3 font-weight-light font-size-small text-muted\"\n                dangerouslySetInnerHTML={{\n                  __html: product.productDescription,\n                }}\n              />\n              <form\n                className=\"mb-grid-gutter\"\n                onSubmit={event => {\n                  event.preventDefault()\n                  dispatch(addToCart(sku.skuID, quantity))\n                  window.scrollTo({\n                    top: 0,\n                    behavior: 'smooth',\n                  })\n                }}\n              >\n                {productOptions.length > 0 && !isFetching && <SkuOptions productID={product.productID} skuOptionDetails={productOptions} availableSkuOptions={availableSkuOptions} sku={sku} skuID={skuID} />}\n                {isFetching && <OptionLoader />}\n                <div className=\"mb-3\">{sku && <ProductPrice salePrice={sku.price} listPrice={sku.listPrice} />}</div>\n                <div className=\"form-group d-flex align-items-center\">\n                  <select\n                    value={quantity}\n                    onChange={event => {\n                      setQuantity(event.target.value)\n                    }}\n                    className=\"custom-select mr-3\"\n                    style={{ width: '5rem' }}\n                  >\n                    {sku &&\n                      sku.calculatedQATS > 0 &&\n                      [...Array(sku.calculatedQATS > 20 ? 20 : sku.calculatedQATS).keys()].map((value, index) => (\n                        <option key={index + 1} value={index + 1}>\n                          {index + 1}\n                        </option>\n                      ))}\n                  </select>\n\n                  <button disabled={cart.isFetching || !skuID} className=\"btn btn-primary btn-block\" type=\"submit\">\n                    <i className=\"far fa-shopping-cart font-size-lg mr-2\"></i>\n                    {t('frontend.product.add_to_cart')}\n                  </button>\n                </div>\n              </form>\n              {/* <!-- Product panels--> */}\n              <ProductPagePanels product={product} attributeSets={attributeSets} />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}\nconst getOptionByCode = (filteredOptions, optionGroupCode, optionCode) => {\n  return filteredOptions\n    .filter(optionGroup => optionGroupCode === optionGroup.optionGroupCode)\n    .map(optionGroup => optionGroup.options.filter(option => optionCode === option.optionCode))\n    .flat()\n    .shift()\n}\nconst SkuOptions = ({ productID, skuOptionDetails, availableSkuOptions, sku, skuID }) => {\n  const [lastOption, setLastOption] = useState({ optionCode: '', optionGroupCode: '' })\n  const loc = useLocation()\n  const history = useHistory()\n  const { t } = useTranslation()\n\n  let params = queryString.parse(loc.search, { arrayFormat: 'separator', arrayFormatSeparator: ',' })\n  if (lastOption.optionGroupCode.length === 0 && Object.keys(params).length > 0) {\n    setLastOption({ optionCode: Object.entries(params)[0][0], optionGroupCode: Object.entries(params)[0][1] })\n  }\n  const calculateOptions = () => {\n    let filteredOptions = skuOptionDetails\n    filteredOptions.forEach(filteredOption => {\n      filteredOption.options = filteredOption.options.map(option => {\n        option.active = true\n        return option\n      })\n    })\n    if (lastOption.optionGroupCode.length > 0) {\n      filteredOptions.forEach(filteredOption => {\n        filteredOption.options = filteredOption.options.map(option => {\n          option.active = filteredOption.optionGroupCode === lastOption.optionGroupCode || availableSkuOptions.includes(option.optionID)\n          return option\n        })\n      })\n    }\n    return filteredOptions\n  }\n  const setOption = (optionGroupCode, optionCode, active) => {\n    delete params['skuid']\n    setLastOption({ optionCode, optionGroupCode })\n    if (!active) {\n      params = {}\n    }\n    params[optionGroupCode] = optionCode\n    history.push({\n      pathname: loc.pathname,\n      search: queryString.stringify(params, { arrayFormat: 'comma' }),\n    })\n  }\n  let filteredOptions = calculateOptions()\n\n  useEffect(() => {\n    let forceSelcted = {}\n    filteredOptions.forEach(optionGroup => {\n      const selectedOptions = optionGroup.options.filter(({ active }) => {\n        return active\n      })\n      if (selectedOptions.length === 1) {\n        forceSelcted[optionGroup.optionGroupCode] = selectedOptions[0].optionCode\n      }\n    })\n    // onkect sort order\n    if (Object.keys(forceSelcted) && JSON.stringify({ ...forceSelcted, ...params }).length !== JSON.stringify(params).length && !params.skuid) {\n      console.log('Redirect because of foreced Selection')\n      history.push({\n        pathname: loc.pathname,\n        search: queryString.stringify({ ...forceSelcted, ...params }, { arrayFormat: 'comma' }),\n      })\n    }\n\n    if (params.skuid && sku) {\n      console.log('Redirect to passed Sku', skuOptionDetails)\n      const cals = skuIdsToSkuCodes(sku.selectedOptionIDList, skuOptionDetails)\n      history.push({\n        pathname: loc.pathname,\n        search: queryString.stringify(Object.assign(...cals), { arrayFormat: 'comma' }),\n      })\n    }\n  }, [history, filteredOptions, loc, params, sku, skuOptionDetails])\n\n  // searchForSelection(filteredOptions)\n  return (\n    <>\n      {filteredOptions.length > 0 &&\n        filteredOptions.map(({ optionGroupName, options, optionGroupID, optionGroupCode }) => {\n          const selectedOptionCode = params[optionGroupCode] || 'select'\n          return (\n            <div className=\"form-group\" key={optionGroupID}>\n              <div className=\"d-flex justify-content-between align-items-center pb-1\">\n                <label className=\"font-weight-medium\" htmlFor={optionGroupID}>\n                  {optionGroupName}\n                </label>\n              </div>\n              <select\n                className=\"custom-select\"\n                required\n                value={selectedOptionCode}\n                id={optionGroupID}\n                onChange={e => {\n                  const selectedOption = getOptionByCode(filteredOptions, optionGroupCode, e.target.value)\n                  setOption(optionGroupCode, selectedOption.optionCode, selectedOption.active)\n                }}\n              >\n                {selectedOptionCode === 'select' && (\n                  <option className={`option nonactive`} value=\"select\">\n                    {t('frontend.product.select')}\n                  </option>\n                )}\n                {options &&\n                  options.map(option => {\n                    return (\n                      <option className={`option ${option.active ? 'active' : 'nonactive'}`} key={option.optionID} value={option.optionCode}>\n                        {option.active && option.optionName}\n                        {!option.active && option.optionName + ' - ' + t('frontend.product.na')}\n                      </option>\n                    )\n                  })}\n              </select>\n            </div>\n          )\n        })}\n    </>\n  )\n}\n\nexport default ProductPageContent\n","import React, { useEffect, useState } from 'react'\nimport { SlatwalApiService } from '../../services'\nimport ProductSlider from '../../components/ProductSlider/ProductSlider'\nimport { renameKeysInArrayOfObjects } from '../../utils'\nimport { useTranslation } from 'react-i18next'\n\nconst ProductDetailSlider = ({ productID }) => {\n  const { t } = useTranslation()\n  const [relatedProducts, setRelatedProducts] = useState({ products: [], isLoaded: false, err: '', productID })\n  if (relatedProducts.productID !== productID) {\n    setRelatedProducts({ products: [], isLoaded: false, err: '', productID })\n  }\n  useEffect(() => {\n    let didCancel = false\n    if (!relatedProducts.isLoaded) {\n      SlatwalApiService.products.getRelatedProducts({ productID }).then(response => {\n        if (response.isSuccess() && !didCancel) {\n          let newProducts = response.success().relatedProducts\n\n          renameKeysInArrayOfObjects(newProducts, 'relatedProduct_', '')\n          setRelatedProducts({\n            ...relatedProducts,\n            isLoaded: true,\n            products: newProducts,\n          })\n        } else {\n          setRelatedProducts({\n            ...relatedProducts,\n            isLoaded: true,\n            err: 'oops',\n          })\n        }\n      })\n    }\n\n    return () => {\n      didCancel = true\n    }\n  }, [relatedProducts, setRelatedProducts, productID])\n  return <ProductSlider title={t('frontend.product.related')} sliderData={relatedProducts.products} />\n}\nexport default ProductDetailSlider\n","// import PropTypes from 'prop-types'\nimport React, { useEffect, useState } from 'react'\n\nimport { Layout } from '../../components'\nimport ProductPageHeader from './ProductPageHeader'\nimport ProductPageContent from './ProductPageContent'\nimport ProductDetailSlider from './ProductDetailSlider'\nimport { Redirect, useHistory, useLocation } from 'react-router-dom'\nimport { useGetEntity, useGetProductAvailableSkuOptions } from '../../hooks/useAPI'\nimport queryString from 'query-string'\nimport { Helmet } from 'react-helmet'\nconst skuCodesToSkuIds = (params, productOptionGroups) => {\n  const parsedOptions = queryString.parse(params, { arrayFormat: 'separator', arrayFormatSeparator: ',' })\n  const temp = Object.keys(parsedOptions).map(optionGroupCode => {\n    return productOptionGroups\n      .map(optionGroup => {\n        const optCount = optionGroup.options.filter(option => {\n          return option.optionCode === parsedOptions[optionGroupCode]\n        })[0]\n        return optCount ? optCount.optionID : null\n      })\n      .filter(option => option)\n  })\n  return temp.join()\n}\n\nconst skuIdsToSkuCodes = (idList, productOptionGroups) => {\n  return productOptionGroups\n    .map(optionGroup =>\n      optionGroup.options\n        .filter(option => {\n          return idList.includes(option.optionID)\n        })\n        .map(option => {\n          let payload = {}\n          payload[optionGroup.optionGroupCode] = option.optionCode\n          return payload\n        })\n    )\n    .flat()\n}\nconst ProductDetail = props => {\n  let { pathname, search } = useLocation()\n  let [skuOptions, getSkuOptionsRequest] = useGetProductAvailableSkuOptions()\n  let [newproduct, getPublicProduct] = useGetEntity()\n\n  let location = useLocation()\n  let history = useHistory()\n  const [path, setPath] = useState(pathname)\n  const params = queryString.parse(search, { arrayFormat: 'separator', arrayFormatSeparator: ',' })\n\n  useEffect(() => {\n    // Redirect to default sku if not provided\n    if (newproduct.isLoaded && !Object.keys(params).length) {\n      console.log('Redirect to Default Sku')\n      const cals = skuIdsToSkuCodes(newproduct.data[0].defaultSelectedOptions, newproduct.data[0].optionGroups)\n      history.push({\n        pathname: location.pathname,\n        search: queryString.stringify(Object.assign(...cals), { arrayFormat: 'comma' }),\n      })\n    }\n    // get the sku\n    if (newproduct.isLoaded && !skuOptions.isFetching && !skuOptions.isLoaded) {\n      const selectedOptionIDList = skuCodesToSkuIds(search, newproduct.data[0].optionGroups)\n      getSkuOptionsRequest({\n        ...skuOptions,\n        isFetching: true,\n        isLoaded: false,\n        params: {\n          productID: newproduct.data[0].productID,\n          skuID: params['skuid'],\n          // Accounts for First Load\n          selectedOptionIDList: selectedOptionIDList.length ? selectedOptionIDList : newproduct.data[0].defaultSelectedOptions,\n        },\n        makeRequest: true,\n      })\n    }\n    // http://localhost:3006/product/demo-product?skuid=2c91808278f0fded0178f5d49b860da8\n\n    history.listen(location => {\n      if (!newproduct.isFetching && newproduct.isLoaded) {\n        const selectedOptionIDList = skuCodesToSkuIds(location.search, newproduct.data[0].optionGroups)\n        getSkuOptionsRequest({\n          ...skuOptions,\n          isFetching: true,\n          isLoaded: false,\n          params: {\n            productID: newproduct.data[0].productID,\n            // Accounts for First Load\n            selectedOptionIDList,\n          },\n          makeRequest: true,\n        })\n      }\n    })\n  }, [history, getSkuOptionsRequest, skuOptions, params, search, location, newproduct])\n\n  // Do we have a valid product?\n  if (!newproduct.isFetching && newproduct.isLoaded && newproduct.data[0] && Object.keys(newproduct.data[0]).length === 0) {\n    return <Redirect to=\"/404\" />\n  }\n  // Get the Product on page chnage\n  if (pathname !== path) {\n    console.log('Refresh all')\n    setPath(pathname)\n\n    // getSkuOptionsRequest({\n    //   ...skuOptions,\n    //   isFetching: false,\n    //   isLoaded: false,\n    //   params: {\n    //     productID: newproduct.data[0].productID,\n    //     selectedOptionIDList: Object.keys(parsedOptions)\n    //       .map(optionGroupCode => {\n    //         return newproduct.data[0].optionGroups\n    //           .map(optionGroup => {\n    //             const optCount = optionGroup.options.filter(option => {\n    //               return option.optionCode === parsedOptions[optionGroupCode]\n    //             })[0]\n    //             return optCount ? optCount.optionID : null\n    //           })\n    //           .filter(option => option)[0]\n    //       })\n    //       .join(),\n    //   },\n    //   makeRequest: false,\n    // })\n  }\n  if (!newproduct.isFetching && !newproduct.isLoaded) {\n    const urlTitle = pathname.split('/').reverse()\n    setPath(pathname)\n    getPublicProduct({\n      ...newproduct,\n      params: {\n        'f:urlTitle': urlTitle[0],\n      },\n      entity: 'product',\n      makeRequest: true,\n      isFetching: true,\n      isLoaded: false,\n    })\n  }\n\n  return (\n    <Layout>\n      <div className=\"bg-light p-0\">\n        {newproduct.isLoaded && <ProductPageHeader title={newproduct.data[0].productSeries} />}\n        {newproduct.isLoaded && <Helmet title={newproduct.data[0].settings.productHTMLTitleString} />}\n        {newproduct.isLoaded && newproduct.data[0].productID && <ProductPageContent attributeSets={newproduct.attributeSets} product={newproduct.data[0]} sku={skuOptions.data.sku[0]} skuID={skuOptions.data.skuID} availableSkuOptions={skuOptions.data.availableSkuOptions} productOptions={newproduct.data[0].optionGroups} isFetching={skuOptions.isFetching || newproduct.isFetching} />}\n        {newproduct.isLoaded && newproduct.data[0].productID && <ProductDetailSlider productID={newproduct.data[0].productID} />}\n      </div>\n    </Layout>\n  )\n}\n\nexport default ProductDetail\n"],"sourceRoot":""}