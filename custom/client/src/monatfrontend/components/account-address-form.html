<!--  new Address form -->
<form  ng-cloak name="accountAddressForm" id={{accountAddressCtrl.formHtmlId}}
	ng-submit="accountAddressForm.$valid && accountAddressCtrl.onFormSubmit()"
>
	<div class="row">
		
		<!--address: first name-->
		<div class="col-12 col-md-6">
			<div class="material-field">
				<input 
				    swvalidationrequired="true"
					type="text"
					class="form-control"
					name="address_first_name"
					ng-model="accountAddressCtrl.accountAddress.firstName"
					oninput="this.value = this.value.replace(/[^a-zA-Z-,' ]/g, '').replace(/(\..*)\./g, '$1')"
				/>
				
				<label ng-bind="accountAddressCtrl.translations.address_first_name"></label>
				<div ng-if="accountAddressForm.$submitted" ng-messages="accountAddressForm.address_first_name.$error">
				    <div ng-messages-include="monat-form-generic-validation-error-messages"></div>
				</div>

			</div>
		</div>
		
		<!--address: last-name-->
		<div class="col-12 col-md-6">
			<div class="material-field">
				<input 
				    swvalidationrequired="true"
					type="text"
					class="form-control"
					name="address_last_name"
					ng-model="accountAddressCtrl.accountAddress.lastName"
					oninput="this.value = this.value.replace(/[^a-zA-Z-,' ]/g, '').replace(/(\..*)\./g, '$1')"
				/>
				
				<label ng-bind="accountAddressCtrl.translations.address_last_name"></label>
				<div ng-if="accountAddressForm.$submitted" ng-messages="accountAddressForm.address_last_name.$error">
				    <div ng-messages-include="monat-form-generic-validation-error-messages"></div>
				</div>

			</div>
		</div>
		
		<!--streetAddress-1-->
		<div class="col-12 col-md-6" ng-if="accountAddressCtrl.addressFormOptions.streetAddressShowFlag">
			<div class="material-field">
				<input
				    swvalidationrequired="accountAddressCtrl.addressFormOptions.streetAddressRequiredFlag"
				    name = "address_streetAddress"
					type="text"
					class="form-control"
					ng-model="accountAddressCtrl.accountAddress.streetAddress"
					oninput="this.value = this.value.replace(/[^a-zA-Z0-9- ]/g, '').replace(/(\..*)\./g, '$1')"
				/>
				<label ng-bind="accountAddressCtrl.addressFormOptions.streetAddressLabel"></label>
				<div ng-if="accountAddressForm.$submitted" ng-messages="accountAddressForm.address_streetAddress.$error">
				    <div ng-messages-include="monat-form-generic-validation-error-messages"></div>
				</div>
			</div>
		</div>

		<!--streetAddress-2-->
		<div class="col-12 col-md-6" ng-if="accountAddressCtrl.addressFormOptions.street2AddressShowFlag">
			<div class="material-field">
				<input
				    swvalidationrequired="accountAddressCtrl.addressFormOptions.street2AddressRequiredFlag"
				    name = "address_street2Address"
					type="text"
					class="form-control"
					ng-model="accountAddressCtrl.accountAddress.street2Address"
					oninput="this.value = this.value.replace(/[^a-zA-Z0-9- ]/g, '').replace(/(\..*)\./g, '$1')"
				/>
				<label ng-bind="accountAddressCtrl.addressFormOptions.street2AddressLabel"></label>
				<div ng-if="accountAddressForm.$submitted" ng-messages="accountAddressForm.address_street2Address.$error">
				    <div ng-messages-include="monat-form-generic-validation-error-messages"></div>
				</div>
			</div>
		</div>
		
		<!--city, postalCode, countryCode, stateCode, locality-->
		<div class="row m-0">
			
			<!--city-->
			<div class="col" ng-if="accountAddressCtrl.addressFormOptions.cityShowFlag">
				<div class="material-field">
	                <input
						type="text"
						class="form-control"
						ng-model="accountAddressCtrl.accountAddress.city"
				    	name = "address_city"
				    	swvalidationrequired="accountAddressCtrl.addressFormOptions.cityRequiredFlag"
				    	oninput="this.value = this.value.replace(/[^a-zA-Z0-9- ]/g, '').replace(/(\..*)\./g, '$1')"
					/>
					<label ng-bind="accountAddressCtrl.addressFormOptions.cityLabel"></label>
					<div ng-if="accountAddressForm.$submitted" ng-messages="accountAddressForm.address_city.$error">
					    <div ng-messages-include="monat-form-generic-validation-error-messages"></div>
					</div>
				</div>
			</div>
			
			<!--postal-code-->
			<div class="col" ng-if="accountAddressCtrl.addressFormOptions.postalCodeShowFlag">
				<div class="material-field">
						<input ng-if="accountAddressCtrl.accountAddress.countryCode == ''" type="text" min="5" maxlength="9" oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1')" name="postalCode" class="form-control"
            				ng-model="accountAddressCtrl.accountAddress.postalCode" swvalidationrequired="accountAddressCtrl.addressFormOptions.postalCodeRequiredFlag"
            			>
            			<input ng-if="accountAddressCtrl.accountAddress.countryCode == 'US'" type="text" pattern=".{5,9}" title="#local.addressPostalcodeTooltipUS#" oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(\..*)\./g, '$1')" name="postalCode" class="form-control"
            				ng-model="accountAddressCtrl.accountAddress.postalCode" swvalidationrequired="accountAddressCtrl.addressFormOptions.postalCodeRequiredFlag"
            			>
            			<input ng-if="accountAddressCtrl.accountAddress.countryCode == 'CA'" type="text"  pattern=".{6}" title="#local.addressPostalcodeTooltipCA#" oninput="this.value = this.value.replace(/[^a-zA-Z0-9]/g, '').replace(/(\..*)\./g, '$1')" name="postalCode" class="form-control"
            				ng-model="accountAddressCtrl.accountAddress.postalCode" swvalidationrequired="accountAddressCtrl.addressFormOptions.postalCodeRequiredFlag"
            			>
            			<input ng-if="accountAddressCtrl.accountAddress.countryCode == 'UK'" type="text" pattern=".{5,7}" title="#local.addressPostalcodeTooltipUK#" oninput="this.value = this.value.replace(/[^a-zA-Z0-9]/g, '').replace(/(\..*)\./g, '$1')" name="postalCode" class="form-control"
            				ng-model="accountAddressCtrl.accountAddress.postalCode" swvalidationrequired="accountAddressCtrl.addressFormOptions.postalCodeRequiredFlag"
            			>
                        <input ng-if="accountAddressCtrl.accountAddress.countryCode == 'GB'" type="text" min="5" maxlength="7" oninput="this.value = this.value.replace(/[^a-zA-Z0-9]/g, '').replace(/(\..*)\./g, '$1')" name="postalCode" class="form-control"
            				ng-model="accountAddressCtrl.accountAddress.postalCode" swvalidationrequired="accountAddressCtrl.addressFormOptions.postalCodeRequiredFlag"
            			>
            			<input ng-if="accountAddressCtrl.accountAddress.countryCode == 'IE'" type="text" pattern=".{7}" title="#local.addressPostalcodeTooltipIE#" oninput="this.value = this.value.replace(/[^a-zA-Z0-9]/g, '').replace(/(\..*)\./g, '$1')" name="postalCode" class="form-control"
            				ng-model="accountAddressCtrl.accountAddress.postalCode" swvalidationrequired="accountAddressCtrl.addressFormOptions.postalCodeRequiredFlag"
            			>
            			<input ng-if="accountAddressCtrl.accountAddress.countryCode == 'PL'" type="text"  pattern="[0-9]{2}[\-][0-9]{3}" oninput="this.value = this.value.replace(/[^0-9]/g, '').replace(/(.{2})\-?(.{1,3}).*/g, '$1-$2')" title="#local.addressPostalcodeTooltipPoland#" name="postalCode" class="form-control"
            				ng-model="accountAddressCtrl.accountAddress.postalCode" swvalidationrequired="accountAddressCtrl.addressFormOptions.postalCodeRequiredFlag"
            			>
					<label ng-bind="accountAddressCtrl.addressFormOptions.postalCodeLabel"></label>
					<div ng-if="accountAddressForm.$submitted" ng-messages="accountAddressForm.address_postalCode.$error">
					    <div ng-messages-include="monat-form-generic-validation-error-messages"></div>
					</div>
				</div>
			</div>
			
			<!--country-code-->
			<div class="col">
				<div class="material-field">
	                    <input
						type="text"
						class="form-control"
						ng-model="accountAddressCtrl.accountAddress.countryCode"
						name = "address_country" 
						readonly
					/>
					<label ng-bind="accountAddressCtrl.translations.address_country"></label>
				</div>
			</div>
		
			<!--state-code-->
			<div class="col" ng-if="accountAddressCtrl.addressFormOptions.stateCodeShowFlag">
				<div class="material-field">
					<select
						type="text"
						class="form-control"
						ng-model="accountAddressCtrl.accountAddress.stateCode"
						name = "address_stateCode" 
				    	swvalidationrequired="accountAddressCtrl.addressFormOptions.stateCodeRequiredFlag"
				    	
						ng-options="state.value as state.name for state in accountAddressCtrl.stateCodeOptions"
						placeholder="{{ accountAddressCtrl.translations.address_state }}"
					>
						<option disabled></option>
					</select>
					<label ng-bind="accountAddressCtrl.addressFormOptions.stateCodeLabel"></label>
					<div ng-if="accountAddressForm.$submitted" ng-messages="accountAddressForm.address_stateCode.$error">
					    <div ng-messages-include="monat-form-generic-validation-error-messages"></div>
					</div>
				</div>
			</div>
			
			<!--locality-->
			<div class="col" ng-if="accountAddressCtrl.addressFormOptions.localityShowFlag">
				<div class="material-field">
	                <input
						type="text"
						class="form-control"
						ng-model="accountAddressCtrl.accountAddress.locality"
				    	name = "address_locality"
				    	swvalidationrequired="accountAddressCtrl.addressFormOptions.localityRequiredFlag"
					/>
					<label ng-bind="accountAddressCtrl.addressFormOptions.localityLabel"></label>
					<div ng-if="accountAddressForm.$submitted" ng-messages="accountAddressForm.address_locality.$error">
					    <div ng-messages-include="monat-form-generic-validation-error-messages"></div>
					</div>
				</div>
			</div>
		</div>
		
		<!--phone-number-->
		<div class="col-12 col-md-6">
			<div class="material-field">
				<input
				 	swvalidationrequired="true"
					type="tel"
					class="form-control"
					ng-model="accountAddressCtrl.accountAddress.phoneNumber"
					name="address_phoneNumber"
					oninput="this.value = this.value.replace(/[^0-9-().+ ]/g, '').replace(/(\..*)\./g, '$1')"
				/>
				<label ng-bind="accountAddressCtrl.translations.address_phoneNumber"></label>
				<div ng-if="accountAddressForm.$submitted" ng-messages="accountAddressForm.address_phoneNumber.$error">
				    <div ng-messages-include="monat-form-generic-validation-error-messages"></div>
				</div>
			</div>
		</div>
		
		<!--email-address-->
		<div class="col-12 col-md-6">
			<div class="material-field">
				<input
				 	swvalidationrequired="true"
					class="form-control"
					ng-model="accountAddressCtrl.accountAddress.emailAddress"
					name="address_emailAddress"
				/>
				<label ng-bind="accountAddressCtrl.translations.address_emailAddress"></label>
				<div ng-if="accountAddressForm.$submitted" ng-messages="accountAddressForm.address_emailAddress.$error">
				    <div ng-messages-include="monat-form-generic-validation-error-messages"></div>
				</div>
			</div>
		</div>
		
		<!--account-address-name-->
		<div class="col-12 col-md-6">
			<div class="material-field">
				<input
				    swvalidationrequired="true"
				    type="text"
					class="form-control"
					name="accountAddressName"
					ng-model="accountAddressCtrl.accountAddress.accountAddressName"
				/>
				<label ng-bind="accountAddressCtrl.translations.address_nickName"></label>
				<div ng-if="accountAddressForm.$submitted" ng-messages="accountAddressForm.accountAddressName.$error">
				    <div ng-messages-include="monat-form-generic-validation-error-messages"></div>
				</div>
			</div>
		</div>

	</div>
	
	
	<div class="form-group">
		<button
			type="submit"
			class="btn bg-primary my-1"
			ng-class="{ 'loading,disabled': accountAddressCtrl.loading}"
			ng-disabled = "accountAddressCtrl.loading"
		>
			<i class="fa fa-plus-circle"></i> 
			<span sw-rbkey="'frontend.global.saveAddress'"></span>
		</button>
		
		<button
			type="button"
			class="btn cancel-dark my-1 ml-1"
			ng-click="accountAddressCtrl.cancel()"
			ng-class="{ disabled : accountAddressCtrl.loading}"
			ng-disabled = "accountAddressCtrl.loading"
			sw-rbkey="'frontend.global.cancel'"
		></button>
	</div>
	
</form>
