{"version":3,"sources":["directives/collection/swcolumnitem.ts"],"names":[],"mappings":"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","file":"directives/collection/swcolumnitem.js","sourceRoot":"/Users/david/Sites/Slatwall/","sourcesContent":["'use strict';\nangular.module('slatwalladmin')\n.directive('swColumnItem', [\n\t'$http',\n\t'$compile',\n\t'$templateCache',\n\t'$log',\n\t'$timeout',\n\t'collectionService',\n\t'collectionPartialsPath',\n\tfunction($http,\n\t\t$compile,\n\t\t$templateCache,\n\t\t$log,\n\t\t$timeout,\n\t\tcollectionService,\n\t\tcollectionPartialsPath\n\t){\n\t\treturn {\n\t\t\trestrict: 'A',\n\t\t\trequire:\"^swDisplayOptions\",\n\t\t\tscope:{\n\t\t\t\tcolumn:\"=\",\n\t\t\t\tcolumns:\"=\",\n\t\t\t\tcolumnIndex:\"=\",\n\t\t\t\tsaveCollection:\"&\",\n\t\t\t\tpropertiesList:\"=\",\n\t\t\t\torderBy:\"=\"\n\t\t\t},\n\t\t\ttemplateUrl:collectionPartialsPath+\"columnitem.html\",\n\t\t\tlink: function(scope, element,attrs,displayOptionsController){\n                scope.editingDisplayTitle=false;\n                \n                scope.editDisplayTitle = function(){\n                    if(angular.isUndefined(scope.column.displayTitle)){\n                        scope.column.displayTitle = scope.column.title;\n                    }\n                    if(!scope.column.displayTitle.length){\n                        scope.column.displayTitle = scope.column.title;\n                    }\n                    scope.previousDisplayTitle=scope.column.displayTitle;\n                    scope.editingDisplayTitle = true;\n                }\n                scope.saveDisplayTitle = function(){\n                    var savePromise = scope.saveCollection();\n                    scope.editingDisplayTitle = false;\n                }\n                scope.cancelDisplayTitle = function(){\n                    scope.column.displayTitle = scope.previousDisplayTitle;\n                    scope.editingDisplayTitle = false;\n                }\n                \n\t\t\t\t$log.debug('displayOptionsController');\n\t\t\t\tif(angular.isUndefined(scope.column.sorting)){\n\t\t\t\t\tscope.column.sorting = {\n\t\t\t\t\t\tactive:false,\n\t\t\t\t\t\tsortOrder:'asc',\n\t\t\t\t\t\tpriority:0\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tscope.toggleVisible = function(column){\n\t\t\t\t\t$log.debug('toggle visible');\n\t\t\t\t\tif(angular.isUndefined(column.isVisible)){\n\t\t\t\t\t\tcolumn.isVisible = false;\n\t\t\t\t\t}\n\t\t\t\t\tcolumn.isVisible = !column.isVisible;\n\t\t\t\t\tscope.saveCollection();\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tscope.toggleSearchable = function(column){\n\t\t\t\t\t$log.debug('toggle searchable');\n\t\t\t\t\tif(angular.isUndefined(column.isSearchable)){\n\t\t\t\t\t\tcolumn.isSearchable = false;\n\t\t\t\t\t}\n\t\t\t\t\tcolumn.isSearchable = !column.isSearchable;\n\t\t\t\t\tscope.saveCollection();\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tscope.toggleExportable = function(column){\n\t\t\t\t\t$log.debug('toggle exporable');\n\t\t\t\t\tif(angular.isUndefined(column.isExportable)){\n\t\t\t\t\t\tcolumn.isExportable = false;\n\t\t\t\t\t}\n\t\t\t\t\tcolumn.isExportable = !column.isExportable;\n\t\t\t\t\tscope.saveCollection();\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tvar compareByPriority = function(a,b){\n\t\t\t\t\tif(angular.isDefined(a.sorting) && angular.isDefined(a.sorting.priority)){\n\t\t\t\t\t\tif(a.sorting.priority < b.sorting.priority){\n\t\t\t\t\t\t\treturn -1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(a.sorting.priority > b.sorting.priority){\n\t\t\t\t\t\t\treturn 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn 0;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tvar updateOrderBy = function(){\n\t\t\t\t\tif(angular.isDefined(scope.columns)){\n\t\t\t\t\t\tvar columnsCopy = angular.copy(scope.columns);\n\t\t\t\t\t\tcolumnsCopy.sort(compareByPriority);\n\t\t\t\t\t\tscope.orderBy = [];\n\t\t\t\t\t\t\n\t\t\t\t\t\tangular.forEach(columnsCopy,function(column){\n\t\t\t\t\t\t\tif(angular.isDefined(column.sorting) && column.sorting.active === true){\n\t\t\t\t\t\t\t\tvar orderBy = {\n\t\t\t\t\t\t\t\t\tpropertyIdentifier:column.propertyIdentifier,\n\t\t\t\t\t\t\t\t\tdirection:column.sorting.sortOrder\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tscope.orderBy.push(orderBy);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tscope.toggleSortable = function(column){\n\t\t\t\t\t$log.debug('toggle sortable');\n\t\t\t\t\tif(angular.isUndefined(column.sorting)){\n\t\t\t\t\t\tcolumn.sorting = {\n\t\t\t\t\t\t\t\tactive:true,\n\t\t\t\t\t\t\t\tsortOrder:'asc',\n\t\t\t\t\t\t\t\tpriority:0\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(column.sorting.active === true){\n\t\t\t\t\t\tif(column.sorting.sortOrder === 'asc'){\n\t\t\t\t\t\t\tcolumn.sorting.sortOrder = 'desc';\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tremoveSorting(column);\n\t\t\t\t\t\t\tcolumn.sorting.active = false;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcolumn.sorting.active = true;\n\t\t\t\t\t\tcolumn.sorting.sortOrder = 'asc';\n\t\t\t\t\t\tcolumn.sorting.priority = getActivelySorting().length;\n\t\t\t\t\t}\n\t\t\t\t\tupdateOrderBy();\n\t\t\t\t\tscope.saveCollection();\n\t\t\t\t\t\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tvar removeSorting = function(column,saving){\n\t\t\t\t\tif(column.sorting.active === true){\n\t\t\t\t\t\tfor(var i in scope.columns){\n\t\t\t\t\t\t\tif(scope.columns[i].sorting.active === true && scope.columns[i].sorting.priority > column.sorting.priority){\n\t\t\t\t\t\t\t\tscope.columns[i].sorting.priority = scope.columns[i].sorting.priority - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcolumn.sorting.priority = 0;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(!saving){\n\t\t\t\t\t\tupdateOrderBy();\n\t\t\t\t\t\tscope.saveCollection();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tscope.prioritize = function(column){\n\t\t\t\t\tif(column.sorting.priority === 1){\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar activelySorting = getActivelySorting();\n\t\t\t\t\t\tfor(var i in scope.columns){\n\t\t\t\t\t\t\tif(scope.columns[i].sorting.active === true){\n\t\t\t\t\t\t\t\tscope.columns[i].sorting.priority = scope.columns[i].sorting.priority - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcolumn.sorting.priority = activelySorting.length;\n\t\t\t\t\t\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tfor(var i in scope.columns){\n\t\t\t\t\t\t\tif(scope.columns[i].sorting.active === true && scope.columns[i].sorting.priority === column.sorting.priority - 1){\n\t\t\t\t\t\t\t\tscope.columns[i].sorting.priority = scope.columns[i].sorting.priority + 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tcolumn.sorting.priority -= 1;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tupdateOrderBy();\n\t\t\t\t\tscope.saveCollection();\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tvar getActivelySorting = function(){\n\t\t\t\t\tvar activelySorting = [];\n\t\t\t\t\tfor(var i in scope.columns){\n\t\t\t\t\t\tif(scope.columns[i].sorting.active === true){\n\t\t\t\t\t\t\tactivelySorting.push(scope.columns[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn activelySorting;\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tscope.removeColumn = function(columnIndex){\n\t\t\t\t\t$log.debug('remove column');\n\t\t\t\t\t$log.debug(columnIndex);\n\t\t\t\t\tremoveSorting(scope.columns[columnIndex],true);\n\t\t\t\t\tdisplayOptionsController.removeColumn(columnIndex);\n\t\t\t\t\tupdateOrderBy();\n\t\t\t\t\tscope.saveCollection();\n\t\t\t\t};\n\t\t\t}\n\t\t};\n\t}\n]);\n\t\n"]}