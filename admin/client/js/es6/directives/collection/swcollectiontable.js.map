{"version":3,"sources":["directives/collection/swcollectiontable.ts"],"names":[],"mappings":"AAAA,YAAY,CAAC;AACb,OAAO,CAAC,MAAM,CAAC,eAAe,CAAC,CAC9B,SAAS,CAAC,mBAAmB,EAAE;IAC/B,OAAO;IACP,UAAU;IACV,MAAM;IACN,wBAAwB;IACxB,mBAAmB;IACnB,UACC,KAAK,EACL,QAAQ,EACR,IAAI,EACJ,sBAAsB,EACtB,iBAAiB;QAEjB,MAAM,CAAC;YACN,QAAQ,EAAE,GAAG;YACb,WAAW,EAAC,sBAAsB,GAAC,sBAAsB;YACzD,KAAK,EAAC;gBACL,UAAU,EAAC,GAAG;gBACd,gBAAgB,EAAC,GAAG;aACpB;YACD,IAAI,EAAE,UAAS,KAAK,EAAC,OAAO,EAAC,KAAK;gBAEjC,IAAI,iBAAiB,GAAG,KAAK,CAAC,UAAU,CAAC,gBAAgB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,GAAC,KAAK,CAAC,UAAU,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC,CAAC,CAAE;gBAC9H,IAAI,qBAAqB,GAAG,iBAAiB,GAAG,IAAI,CAAC;gBACrD,KAAK,CAAC,MAAM,CAAC,wBAAwB,EAAC;oBACtB,GAAG,CAAA,CAAC,GAAG,CAAC,MAAM,IAAI,KAAK,CAAC,UAAU,CAAC,WAAW,CAAC,CAAA,CAAC;wBAC5C,IAAI,WAAW,CAAC;wBAChB,IAAI,SAAS,CAAC;wBAEd,IAAI,WAAW,GAAG,KAAK,CAAC,UAAU,CAAC,WAAW,CAAE,MAAM,CAAE,CAAC;wBACzD,IAAI,SAAS,GAAG,WAAW,CAAE,qBAAqB,CAAE,CAAC;wBAErD,EAAE,CAAA,CAAC,SAAS,IAAI,iBAAiB,KAAK,SAAS,CAAC,CAAA,CAAC;4BAC7C,WAAW,GAAG,2BAA2B,GAAG,iBAAiB,GAAG,GAAG,GAAG,iBAAiB,GAAG,KAAK,GAAG,SAAS,CAAC;4BAC5G,SAAS,GAAG,yBAAyB,GAAG,iBAAiB,GAAG,GAAG,GAAG,iBAAiB,GAAG,KAAK,GAAG,SAAS,CAAC;wBAE5G,CAAC;wBAAC,IAAI,CAAC,EAAE,CAAC,CAAC,iBAAiB,KAAK,SAAU,CAAC,CAAA,CAAC;4BAEzC,WAAW,GAAG,2BAA2B,GAAG,iBAAiB,GAAG,eAAe,GAAG,WAAW,CAAC,aAAa,CAAC,CAAC;4BAC7G,WAAW,GAAG,yBAAyB,GAAG,iBAAiB,GAAG,eAAe,GAAG,WAAW,CAAC,aAAa,CAAC,CAAC;wBAE/G,CAAC;wBAED,WAAW,CAAC,YAAY,CAAC,GAAG,WAAW,CAAC;wBACxC,WAAW,CAAC,UAAU,CAAC,GAAG,SAAS,CAAC;oBACxC,CAAC;gBACL,CAAC,CAAC,CAAA;gBAGd,AAGA;;qBADK;gBACL,OAAO,CAAC,OAAO,CAAC,KAAK,CAAC,gBAAgB,CAAC,OAAO,EAAC,UAAS,MAAM;oBAC7D,IAAI,CAAC,KAAK,CAAC,eAAe,GAAG,MAAM,CAAC,CAAC;oBACrC,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,kBAAkB,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,gBAAgB,CAAC,eAAe,GAAC,GAAG,EAAC,EAAE,CAAC,CAAC;gBACnH,CAAC,CAAC,CAAC;YAEJ,CAAC;SACD,CAAC;IACH,CAAC;CACD,CAAC,CAAC","file":"directives/collection/swcollectiontable.js","sourceRoot":"/Users/david/Sites/Slatwall/","sourcesContent":["'use strict';\nangular.module('slatwalladmin')\n.directive('swCollectionTable', [\n\t'$http',\n\t'$compile',\n\t'$log',\n\t'collectionPartialsPath',\n\t'paginationService',\n\tfunction(\n\t\t$http,\n\t\t$compile,\n\t\t$log,\n\t\tcollectionPartialsPath,\n\t\tpaginationService\n\t){\n\t\treturn {\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl:collectionPartialsPath+\"collectiontable.html\",\n\t\t\tscope:{\n\t\t\t\tcollection:\"=\",\n\t\t\t\tcollectionConfig:\"=\"\n\t\t\t},\n\t\t\tlink: function(scope,element,attrs){\n\t\t\t\t\n\t\t\t\tvar _collectionObject = scope.collection.collectionObject.charAt(0).toLowerCase()+scope.collection.collectionObject.slice(1) ;\n\t\t\t\tvar _recordKeyForObjectID = _collectionObject + 'ID';\n\t\t\t\tscope.$watch('collection.pageRecords',function(){\n                    for(var record in scope.collection.pageRecords){\n                        var _detailLink;\n                        var _editLink;\n                        \n                        var _pageRecord = scope.collection.pageRecords[ record ];\n                        var _objectID = _pageRecord[ _recordKeyForObjectID ];\n                        \n                        if(_objectID && _collectionObject !== 'country'){\n                            _detailLink = \"?slatAction=entity.detail\" + _collectionObject + \"&\" + _collectionObject + \"ID=\" + _objectID;\n                            _editLink = \"?slatAction=entity.edit\" + _collectionObject + \"&\" + _collectionObject + \"ID=\" + _objectID;\n                            \n                        } else if (_collectionObject === 'country' ){\n                            \n                            _detailLink = \"?slatAction=entity.detail\" + _collectionObject + \"&countryCode=\" + _pageRecord[\"countryCode\"];\n                            _detailLink = \"?slatAction=entity.edit\" + _collectionObject + \"&countryCode=\" + _pageRecord[\"countryCode\"];\n                            \n                        }\n                        \n                        _pageRecord[\"detailLink\"] = _detailLink;\n                        _pageRecord[\"editLink\"] = _editLink;\n                    }\n                })\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t/* \n\t\t\t\t * Handles setting the key on the data.\n\t\t\t\t * */\n\t\t\t\tangular.forEach(scope.collectionConfig.columns,function(column){\n\t\t\t\t\t$log.debug(\"Config Key : \" + column);\n\t\t\t\t\tcolumn.key = column.propertyIdentifier.replace(/\\./g, '_').replace(scope.collectionConfig.baseEntityAlias+'_','');\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}\n\t\t};\n\t}\n]);\n\t"]}