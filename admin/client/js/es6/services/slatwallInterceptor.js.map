{"version":3,"sources":["services/slatwallInterceptor.ts"],"names":[],"mappings":"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","file":"services/slatwallInterceptor.js","sourceRoot":"/Users/david/Sites/Slatwall/","sourcesContent":["'use strict';\nangular.module('slatwalladmin')\n.factory('slatwallInterceptor',[\n\t'$q',\n\t'$log',\n\t'alertService',\n\tfunction(\n\t\t$q,\n\t\t$log,\n\t\talertService\n\t){\n\t\tvar interceptor = {\n\t\t\t'request':function(config){\n\t\t\t\t$log.debug('request');\n\t\t\t\tif(config.method == 'GET' && (config.url.indexOf('.html') == -1) && config.url.indexOf('.json') == -1){\n\t\t\t\t\tconfig.method = 'POST';\n\t\t\t\t\tconfig.data = {};\n\t\t\t\t\tvar data = {};\n\t\t\t\t\tif(angular.isDefined(config.params)){\n\t\t\t\t\t\tdata = config.params;\n\t\t\t\t\t}\n\t\t\t\t\tvar params = {};\n\t\t\t\t\tparams.serializedJsonData = angular.toJson(data);\n\t\t\t\t\tparams.context=\"GET\";\n\t\t\t\t\tconfig.data = $.param(params);\n\t\t\t\t\tdelete config.params;\n\t\t\t\t\tconfig.headers['Content-Type']= 'application/x-www-form-urlencoded';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn config;\n\t\t\t},\n\t\t\t'response':function(response){\n\t\t\t\t$log.debug('response');\n\t\t\t\tvar messages = response.data.messages;\n\t\t\t\tvar alerts = alertService.formatMessagesToAlerts(messages);\n\t\t\t\talertService.addAlerts(alerts);\n\t\t\t\treturn response;\n\t\t\t},\n\t\t\t'requestError':function(rejection){\n\t\t\t\t$log.debug('requestError');\n\t\t\t\treturn $q.reject(rejection);\n\t\t\t},\n\t\t\t'responseError':function(rejection){\n\t\t\t\t$log.debug('responseReject');\n\t\t\t\tif(angular.isDefined(rejection.status) && rejection.status !== 404){\n\t\t\t\t\tif(angular.isDefined(rejection.data) && angular.isDefined(rejection.data.messages)){\n\t\t\t\t\t\tvar messages = rejection.data.messages;\n\t\t\t\t\t\tvar alerts = alertService.formatMessagesToAlerts(messages);\n\t\t\t\t\t\talertService.addAlerts(alerts);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tvar message = {\n\t\t\t\t\t\t\tmsg:'there was error retrieving data',\n\t\t\t\t\t\t\ttype:'error'\n\t\t\t\t\t\t};\n\t\t\t\t\t\talertService.addAlert(message);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn $q.reject(rejection);\n\t\t\t}\n\t\t};\n\t\treturn interceptor;\n\t}\n]);\n"]}