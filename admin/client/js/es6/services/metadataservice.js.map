{"version":3,"sources":["services/metadataservice.ts"],"names":[],"mappings":"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","file":"services/metadataservice.js","sourceRoot":"/Users/david/Sites/Slatwall/","sourcesContent":["'use strict';\nangular.module('slatwalladmin')\n.factory('metadataService',[\n\t'$filter',\n\t'$log',\n\tfunction(\n\t\t$filter,\n\t\t$log\n\t){\n\t\tvar _propertiesList = {};\n\t\tvar _orderBy = $filter('orderBy');\n\t\t\n\t\tvar metadataService = {\n\t\t\tgetPropertiesList:function(){\n\t\t\t\treturn _propertiesList;\n\t\t\t},\n\t\t\tgetPropertiesListByBaseEntityAlias: function(baseEntityAlias){\n\t\t\t\treturn _propertiesList[baseEntityAlias];\n\t\t\t},\n\t\t\tsetPropertiesList: function(value,key){\n\t\t\t\t_propertiesList[key] = value;\n\t\t\t},\n\t\t\tformatPropertiesList: function(propertiesList,propertyIdentifier){\n\t\t\t\tvar simpleGroup = {\n\t\t\t\t\t\t$$group:'simple',\n\t\t\t\t\t\t//displayPropertyIdentifier:'-----------------'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tpropertiesList.data.push(simpleGroup);\n\t\t\t\tvar drillDownGroup = {\n\t\t\t\t\t\t$$group:'drilldown',\n\t\t\t\t\t\t//displayPropertyIdentifier:'-----------------'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tpropertiesList.data.push(drillDownGroup);\n\t\t\t\t\n\t\t\t\tvar compareCollections = {\n\t\t\t\t\t\t$$group:'compareCollections',\n\t\t\t\t\t\t//displayPropertyIdentifier:'-----------------'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tpropertiesList.data.push(compareCollections);\n\t\t\t\t\n\t\t\t\tvar attributeCollections = {\n\t\t\t\t\t\t$$group:'attribute',\n\t\t\t\t\t\t//displayPropertyIdentifier:'-----------------'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tpropertiesList.data.push(attributeCollections);\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tfor(var i in propertiesList.data){\n\t\t\t\t\tif(angular.isDefined(propertiesList.data[i].ormtype)){\n\t\t\t\t\t\tif(angular.isDefined(propertiesList.data[i].attributeID)){\n\t\t\t\t\t\t\tpropertiesList.data[i].$$group = 'attribute';\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tpropertiesList.data[i].$$group = 'simple';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(angular.isDefined(propertiesList.data[i].fieldtype)){\n\t\t\t\t\t\tif(propertiesList.data[i].fieldtype === 'id'){\n\t\t\t\t\t\t\tpropertiesList.data[i].$$group = 'simple';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(propertiesList.data[i].fieldtype === 'many-to-one'){\n\t\t\t\t\t\t\tpropertiesList.data[i].$$group = 'drilldown';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(propertiesList.data[i].fieldtype === 'many-to-many' || propertiesList.data[i].fieldtype === 'one-to-many'){\n\t\t\t\t\t\t\tpropertiesList.data[i].$$group = 'compareCollections';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tpropertiesList.data[i].propertyIdentifier = propertyIdentifier + '.' +propertiesList.data[i].name;\n\t\t\t\t}\n\t\t\t\t//propertiesList.data = _orderBy(propertiesList.data,['displayPropertyIdentifier'],false);\n\t\t\t\t\n\t\t\t\t//--------------------------------Removes empty lines from dropdown.\n\t\t\t\tvar temp = [];\n\t\t\t\tfor (var i = 0; i <=propertiesList.data.length -1; i++){\n\t\t\t\t\tif (propertiesList.data[i].propertyIdentifier.indexOf(\".undefined\") != -1){\n\t\t\t\t\t\t$log.debug(\"removing: \" + propertiesList.data[i].displayPropertyIdentifier);\n\t\t\t\t\t\tpropertiesList.data[i].displayPropertyIdentifier = \"hide\";\n\t\t\t\t\t\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\ttemp.push(propertiesList.data[i]);\n\t\t\t\t\t\t$log.debug(propertiesList.data[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttemp.sort;\n\t\t\t\tpropertiesList.data = temp;\n\t\t\t\t$log.debug(\"----------------------PropertyList\\n\\n\\n\\n\\n\");\n\t\t\t\tpropertiesList.data = _orderBy(propertiesList.data,['propertyIdentifier'],false);\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t//--------------------------------End remove empty lines.\n\t\t\t},\n\t\t\t\n\t\t\torderBy: function(propertiesList,predicate,reverse){\n\t\t\t\treturn _orderBy(propertiesList,predicate,reverse);\n\t\t\t}\n\t\t\t\n\t\t};\n\t\t\n\t\treturn metadataService;\n\t}\n]);\n"]}