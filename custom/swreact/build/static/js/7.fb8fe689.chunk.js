(this.webpackJsonpstoneandberg=this.webpackJsonpstoneandberg||[]).push([[7,19],{522:function(t,e,a){"use strict";a.r(e);var r=a(2),o=a(33),i=a(5),n=a(1),s=a(31),c=a(21),d=a(18),u=a(24),p=a.n(u),l=a(145),f=a(3),b=a(10),h=a(0),j=function(t,e){var a=p.a.parse(t,{arrayFormat:"separator",arrayFormatSeparator:","});return Object.keys(a).map((function(t){return e.map((function(e){var r=e.options.filter((function(e){return e.optionCode===a[t]}))[0];return r?r.optionID:null})).filter((function(t){return t}))})).join()};e.default=function(t){var e=Object(c.h)(),a=Object(c.g)(),u=Object(d.i)(),O=Object(i.a)(u,2),g=O[0],m=O[1],k=Object(d.g)(),F=Object(i.a)(k,2),L=F[0],v=F[1],y=Object(n.useState)(e.pathname),D=Object(i.a)(y,2),I=D[0],S=D[1],T=Object(f.c)(b.r),x=p.a.parse(e.search,{arrayFormat:"separator",arrayFormatSeparator:","}),q=Object(f.c)((function(t){return t.configuration.filtering.productTypeBase}));return Object(n.useEffect)((function(){if(L.isLoaded&&!Object.keys(x).length){console.log("Redirect to Default Sku");var t=(r=L.data.defaultSelectedOptions,L.data.optionGroups.map((function(t){return t.options.filter((function(t){return r.includes(t.optionID)})).map((function(e){var a={};return a[t.optionGroupCode]=e.optionCode,a}))})).flat());a.push({pathname:e.pathname,search:p.a.stringify(Object.assign.apply(Object,Object(o.a)(t)),{arrayFormat:"comma"})})}var r}),[a,x,e.pathname,L]),Object(n.useEffect)((function(){if(!L.isFetching&&!L.isLoaded){console.log("First and only product request");var t=e.pathname.split("/").reverse();v({data:[],error:"",entity:"product",params:{urlTitle:t[0]},makeRequest:!0,isFetching:!0,isLoaded:!1})}}),[e.pathname,v,L.isFetching,L.isLoaded]),Object(n.useEffect)((function(){if(L.isLoaded&&!g.isFetching&&!g.isLoaded&&!g.isFetching){console.log("First and only option request");var t=j(e.search,L.data.optionGroups);m(Object(r.a)(Object(r.a)({},g),{},{isFetching:!0,isLoaded:!1,params:{productID:L.data.productID,skuID:x.skuid,selectedOptionIDList:t.length?t:L.data.defaultSelectedOptions},makeRequest:!0}))}}),[m,g,x.skuid,e.search,L]),Object(n.useEffect)((function(){var t=a.listen((function(t){if(I!==t.pathname){console.log("product change");var e=t.pathname.split("/").reverse();S(t.pathname),v({data:[],error:"",entity:"product",params:{urlTitle:e[0]},makeRequest:!0,isFetching:!0,isLoaded:!1}),m({data:{sku:{}},error:"",params:{},makeRequest:!1,isFetching:!1,isLoaded:!1}),window.scrollTo({top:0,behavior:"smooth"})}else if(!L.isFetching&&L.isLoaded&&!g.isLoaded&&!g.isFetching){console.log("option change");var a=j(t.search,L.data.optionGroups);m({data:{sku:{}},error:"",isFetching:!0,isLoaded:!1,params:{productID:L.data.productID,selectedOptionIDList:a},makeRequest:!0})}}));return function(){t()}}),[I,S,a,v,L,m,g]),!L.isFetching&&L.isLoaded&&L.data&&0===Object.keys(L.data).length?Object(h.jsx)(c.a,{to:"/404"}):Object(h.jsx)(s.Q,{children:Object(h.jsxs)("div",{className:"bg-light p-0",children:[L.isLoaded&&Object(h.jsx)(s.qb,{title:L.data.productSeries,children:Object(h.jsx)(s.s,{crumbs:L.data.breadcrumbs.map((function(t){return{title:t.productTypeName,urlTitle:"/".concat(T,"/").concat(t.urlTitle)}})).filter((function(t){return t.urlTitle!=="/".concat(T,"/").concat(q)}))})}),L.isLoaded&&Object(h.jsx)(l.a,{title:L.data.settings.productHTMLTitleString}),L.isLoaded&&L.data.productID&&g.isLoaded&&Object(h.jsx)(s.pb,{attributeSets:L.attributeSets,product:L.data,sku:g.data.sku[0],skuID:g.data.skuID,availableSkuOptions:g.data.availableSkuOptions,productOptions:L.data.optionGroups,isFetching:g.isFetching||L.isFetching}),L.isLoaded&&L.data.productID&&Object(h.jsx)(s.yb,{productID:L.data.productID})]})})}},532:function(t,e,a){"use strict";a.r(e);var r=a(522),o=a(21),i=a(0);e.default=function(){var t=Object(o.h)();return Object(i.jsx)(r.default,{forwardState:t})}}}]);
//# sourceMappingURL=7.fb8fe689.chunk.js.map