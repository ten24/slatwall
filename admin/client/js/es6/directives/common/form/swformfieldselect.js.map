{"version":3,"sources":["directives/common/form/swformfieldselect.ts"],"names":[],"mappings":"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","file":"directives/common/form/swformfieldselect.js","sourceRoot":"/Users/david/Sites/Slatwall/","sourcesContent":["angular.module('slatwalladmin')\n.directive('swFormFieldSelect', [\n'$log',\n'$slatwall',\n'formService',\n'partialsPath',\n\tfunction(\n\t$log,\n\t$slatwall,\n\tformService,\n\tpartialsPath\n\t){\n\t\treturn{\n\t\t\ttemplateUrl:partialsPath+'formfields/select.html',\n\t\t\trequire:\"^form\",\n\t\t\trestrict: 'E',\n\t\t\tscope:{\n\t\t\t\tpropertyDisplay:\"=\"\n\t\t\t},\n\t\t\tlink:function(scope,element,attr,formController){\n\t\t\t\t\n\t\t\t\tvar selectType;\n\t\t\t\t\n\t\t\t\tif(angular.isDefined(scope.propertyDisplay.object.metaData[scope.propertyDisplay.property].fieldtype)){\n\t\t\t\t\tselectType = 'object';\n\t\t\t\t}else{\n\t\t\t\t\tselectType = 'string';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tscope.formFieldChanged = function(option){\n\t\t\t\t\t$log.debug('formfieldchanged');\n\t\t\t\t\t$log.debug(option);\n\t\t\t\t\tif(selectType === 'object'){\n\t\t\t\t\t\tscope.propertyDisplay.object.data[scope.propertyDisplay.property]['data'][scope.propertyDisplay.object.data[scope.propertyDisplay.property].$$getIDName()] = option.value;\n\t\t\t\t\t\tscope.propertyDisplay.form[scope.propertyDisplay.object.data[scope.propertyDisplay.property].$$getIDName()].$dirty = true;\n\t\t\t\t\t}else if(selectType === 'string'){\n\t\t\t\t\t\tscope.propertyDisplay.object.data[scope.propertyDisplay.property] = option.value;\n\t\t\t\t\t\tscope.propertyDisplay.form[scope.propertyDisplay.property].$dirty = true;\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tscope.getOptions = function(){\n\t\t\t\t\tif(angular.isUndefined(scope.propertyDisplay.options)){\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar optionsPromise = $slatwall.getPropertyDisplayOptions(scope.propertyDisplay.object.metaData.className,\n\t\t\t\t\t\t\t scope.propertyDisplay.optionsArguments\n\t\t\t\t\t\t);\n\t\t\t\t\t\toptionsPromise.then(function(value){\n\t\t\t\t\t\t\tscope.propertyDisplay.options = value.data;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(selectType === 'object'\n\t\t\t\t\t\t\t){\n\t\t\t\t\t\t\t\tif(scope.propertyDisplay.object.data[scope.propertyDisplay.property].$$getID() === ''){\n\t\t\t\t\t\t\t\t\tscope.propertyDisplay.object.data['selected'+scope.propertyDisplay.property] = scope.propertyDisplay.options[0];\n\t\t\t\t\t\t\t\t\tscope.propertyDisplay.object.data[scope.propertyDisplay.property] = $slatwall['new'+scope.propertyDisplay.object.metaData[scope.propertyDisplay.property].cfc]();\n\t\t\t\t\t\t\t\t\tscope.propertyDisplay.object.data[scope.propertyDisplay.property]['data'][scope.propertyDisplay.object.data[scope.propertyDisplay.property].$$getIDName()] = scope.propertyDisplay.options[0].value;\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tfor(var i in scope.propertyDisplay.options){\n\t\t\t\t\t\t\t\t\t\tif(scope.propertyDisplay.options[i].value === scope.propertyDisplay.object.data[scope.propertyDisplay.property]){\n\t\t\t\t\t\t\t\t\t\t\tscope.propertyDisplay.object.data['selected'+scope.propertyDisplay.property] = scope.propertyDisplay.options[i];\n\t\t\t\t\t\t\t\t\t\t\tscope.propertyDisplay.object.data[scope.propertyDisplay.property] = scope.propertyDisplay.options[i].value;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}else if(selectType === 'string'){\n\t\t\t\t\t\t\t\tif(scope.propertyDisplay.object.data[scope.propertyDisplay.property] !== null){\n\t\t\t\t\t\t\t\t\tfor(var i in scope.propertyDisplay.options){\n\t\t\t\t\t\t\t\t\t\tif(scope.propertyDisplay.options[i].value === scope.propertyDisplay.object.data[scope.propertyDisplay.property]){\n\t\t\t\t\t\t\t\t\t\t\tscope.propertyDisplay.object.data['selected'+scope.propertyDisplay.property] = scope.propertyDisplay.options[i];\n\t\t\t\t\t\t\t\t\t\t\tscope.propertyDisplay.object.data[scope.propertyDisplay.property] = scope.propertyDisplay.options[i].value;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\tscope.propertyDisplay.object.data['selected'+scope.propertyDisplay.property] = scope.propertyDisplay.options[0];\n\t\t\t\t\t\t\t\t\tscope.propertyDisplay.object.data[scope.propertyDisplay.property] = scope.propertyDisplay.options[0].value;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tif(scope.propertyDisplay.eagerLoadOptions === true){\n\t\t\t\t\tscope.getOptions();\n\t\t\t\t}\n\t        \t//formService.setPristinePropertyValue(scope.propertyDisplay.property,scope.propertyDisplay.object[scope.propertyDisplay.valueOptions].value[0]);\n\t\t\t\t\n\t\t\t\tif(selectType === 'object'){\n\t\t\t\t\tformController[scope.propertyDisplay.property+'ID'].$dirty = scope.propertyDisplay.isDirty;\t\n\t\t\t\t}else if(selectType === 'string'){\n\t\t\t\t\tformController[scope.propertyDisplay.property].$dirty = scope.propertyDisplay.isDirty;\t\n\t\t\t\t}\n\t        }\n\t\t};\n\t}\n]);\n\t\n"]}