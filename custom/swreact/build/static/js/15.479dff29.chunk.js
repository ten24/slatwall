(this.webpackJsonpswreact=this.webpackJsonpswreact||[]).push([[15],{286:function(e,t,a){"use strict";var c=a(0),s=a(29),r=a(4),n=a(10);t.a=function(){var e=Object(n.g)().pathname.split("/").reverse()[0].toLowerCase(),t=Object(r.d)((function(t){return t.content[e]}))||{};return Object(c.jsx)("div",{className:"page-title-overlap bg-lightgray pt-4",children:Object(c.jsxs)("div",{className:"container d-lg-flex justify-content-between py-2 py-lg-3",children:[Object(c.jsx)("div",{className:"order-lg-2 mb-3 mb-lg-0 pt-lg-2",children:Object(c.jsx)(s.b,{})}),Object(c.jsx)("div",{className:"order-lg-1 pr-lg-4 text-center text-lg-left",children:Object(c.jsx)("h1",{className:"h3 text-dark mb-0 font-accent",children:t.title||""})})]})})}},317:function(e,t,a){"use strict";a.r(t);var c=a(2),s=a(21),r=a(0),n=a(1),i=a(29),l=a(4),o=a(69),d=function(e){var t=e.pageRecords;return Object(r.jsx)("div",{className:"row mx-n2",children:t&&t.map((function(e,t){return Object(r.jsx)("div",{className:"col-md-4 col-sm-6 px-2 mb-4",children:Object(r.jsx)(o.a,Object(c.a)({},e))},t)}))})},j=a(274),b=function(e){var t=e.sortingOptions,a=e.appliedFilters,c=e.sortBy,s=e.removeFilter,n=e.setSort,i=Object(j.a)(),l=i.t;i.i18n;return Object(r.jsxs)("div",{className:"d-flex justify-content-center justify-content-sm-between align-items-center pt-2 pb-4 pb-sm-5",children:[Object(r.jsx)("div",{className:"d-flex flex-wrap",children:Object(r.jsxs)("div",{className:"form-inline flex-nowrap mr-3 mr-sm-4 pb-sm-3",children:[Object(r.jsx)("label",{className:"text-dark opacity-75 text-nowrap mr-2 d-none d-sm-block",children:l("frontend.plp.search.applied_filters")}),a&&a.map((function(e,t){var a=e.name,c=e.filterName;return Object(r.jsxs)("span",{className:"badge badge-light border p-2 mr-2",children:[Object(r.jsx)("a",{onClick:function(e){e.preventDefault(),s({name:a,filterName:c})},children:Object(r.jsx)("i",{className:"far fa-times"})}),a]},t)}))]})}),Object(r.jsxs)("div",{className:"d-sm-flex pb-3 align-items-center",children:[Object(r.jsx)("label",{className:"text-dark opacity-75 text-nowrap mr-2 mb-0 d-none d-sm-block",htmlFor:"sorting",children:"Sort by:"}),Object(r.jsx)("select",{className:"form-control custom-select",id:"sorting",value:c,onChange:function(e){e.preventDefault(),n(e.target.value)},children:t&&t.map((function(e,t){var a=e.name,c=e.value;return Object(r.jsx)("option",{value:c,children:a},t)}))})]})]})},u=a(55),m=(a(12),"LEFT"),p="RIGHT",h=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=e,s=[];c<=t;)s.push(c),c+=a;return s},f=function(e){var t=e.recordsCount,a=e.pageNeighbours,c=void 0===a?2:a,s=e.currentPage,n=e.totalPages,i=void 0===n?1:n,o=e.setPage,d=(Object(l.c)(),Object(j.a)()),b=d.t,f=(d.i18n,function(e){var t=Math.max(0,Math.min(e,i));o(t)}),O=function(e,t,a){var c=2*t+3;if(a>c+2){var s=Math.max(2,e-t),r=Math.min(a-1,e+t),n=h(s,r),i=s>2,l=a-r>1,o=c-(n.length+1);switch(!0){case i&&!l:var d=h(s-o,s-1);n=[m].concat(Object(u.a)(d),Object(u.a)(n));break;case!i&&l:var j=h(r+1,r+o);n=[].concat(Object(u.a)(n),Object(u.a)(j),[p]);break;case i&&l:default:n=[m].concat(Object(u.a)(n),[p])}return[1].concat(Object(u.a)(n),[a])}return h(1,a)}(s,c,i);return t&&1!==i?Object(r.jsx)("nav",{className:"d-flex justify-content-between pt-2","aria-label":"Page navigation",children:Object(r.jsx)("ul",{className:"mx-auto pagination",children:O.map((function(e,t){return e===m?Object(r.jsx)("li",{className:"page-item",children:Object(r.jsxs)("div",{className:"page-link",href:"","aria-label":"Previous",onClick:function(e){e.preventDefault(),f(s-2*c-1)},children:[Object(r.jsx)("span",{"aria-hidden":"true",children:"\xab"}),Object(r.jsx)("span",{className:"sr-only",children:b("frontend.pagination.previous")})]})},t):e===p?Object(r.jsx)("li",{className:"page-item",children:Object(r.jsxs)("div",{className:"page-link","aria-label":"Next",onClick:function(e){e.preventDefault(),f(s+2*c+1)},children:[Object(r.jsx)("span",{"aria-hidden":"true",children:"\xbb"}),Object(r.jsx)("span",{className:"sr-only",children:b("frontend.pagination.next")})]})},t):Object(r.jsx)("li",{className:"page-item".concat(s===e?" active":""),children:Object(r.jsx)("div",{className:"page-link",onClick:function(t){t.preventDefault();var a=Math.max(0,Math.min(e,i));o(a)},children:e})},t)}))})}):null},O=a(67),x=a.n(O),g=function(e){var t=e.name,a=e.count,c=e.sub,s=e.filterName,n=e.isSelected,i=e.updateAttribute,l=s.replace(/\s/g,"")+t.replace(/\s/g,"")+"input";return Object(r.jsx)("li",{className:"widget-list-item cz-filter-item",children:Object(r.jsxs)("div",{className:"widget-list-link d-flex justify-content-between align-items-center",children:[Object(r.jsx)("span",{className:"cz-filter-item-text",children:Object(r.jsxs)("div",{className:"custom-control custom-checkbox",children:[Object(r.jsx)("input",{className:"custom-control-input",type:"checkbox",checked:n,onChange:function(e){e.preventDefault(),i({name:t,filterName:s})},id:l}),Object(r.jsxs)("label",{className:"custom-control-label",htmlFor:l,children:[t," ",Object(r.jsx)("span",{className:"font-size-xs text-muted",children:c})]})]})}),a&&Object(r.jsx)("span",{className:"font-size-xs text-muted ml-3",children:a})]})})},v=function(e){var t=e.name,a=e.count,c=e.filterName,s=e.addFilter;return Object(r.jsx)("li",{className:"widget-list-item cz-filter-item",children:Object(r.jsxs)("a",{className:"widget-list-link d-flex justify-content-between align-items-center",onClick:function(e){e.preventDefault(),s({name:t,filterName:c})},children:[Object(r.jsx)("span",{className:"cz-filter-item-text",children:t}),a&&Object(r.jsx)("span",{className:"font-size-xs text-muted ml-3",children:a})]})})},N=function(e){var t=e.searchTerm,a=e.search;return Object(r.jsxs)("div",{className:"input-group-overlay input-group-sm mb-2",children:[Object(r.jsx)("input",{className:"cz-filter-search form-control form-control-sm appended-form-control",value:t,onChange:function(e){a(e.target.value)},type:"text",placeholder:"Search"}),Object(r.jsx)("div",{className:"input-group-append-overlay",children:Object(r.jsx)("span",{className:"input-group-text",children:Object(r.jsx)("i",{className:"far fa-search"})})})]})},y=function(e){var t=e.appliedFilters,a=e.filterName,i=e.options,l=e.index,o=e.type,d=e.addFilter,j=e.updateAttribute,b=Object(n.useState)(""),u=Object(s.a)(b,2),m=u[0],p=u[1],h=Object(n.useState)([]),f=Object(s.a)(h,2),O=f[0],x=f[1];return Object(n.useEffect)((function(){var e=t.filter((function(e){return e.filterName===a})),c=i.filter((function(t){var a=t.name;return!e.some((function(e){return e.name!==a}))}));m.length&&(c=i.filter((function(e){return e.name.toLowerCase().includes(m.toLowerCase())}))),x(c)}),[m,i,t,a]),Object(r.jsxs)("div",{className:"card border-bottom pt-1 pb-2 my-1",children:[Object(r.jsx)("div",{className:"card-header",children:Object(r.jsx)("h3",{className:"accordion-heading",children:Object(r.jsxs)("a",{className:"collapsed",href:"#filer".concat(l),role:"button","data-toggle":"collapse","aria-expanded":"false","aria-controls":"productType",children:[a,Object(r.jsx)("span",{className:"accordion-indicator"})]})})}),Object(r.jsx)("div",{className:"collapse",id:"filer".concat(l),"data-parent":"#shop-categories",children:Object(r.jsx)("div",{className:"card-body",children:Object(r.jsxs)("div",{className:"widget widget-links cz-filter",children:[Object(r.jsx)(N,{searchTerm:m,search:p}),Object(r.jsx)("ul",{className:"widget-list cz-filter-list pt-1",style:{height:"12rem"},"data-simplebar":!0,"data-simplebar-auto-hide":"false",children:O&&O.map((function(e,t){return"attribute"===o?Object(n.createElement)(g,Object(c.a)(Object(c.a)({},e),{},{key:t,filterName:a,updateAttribute:j})):Object(n.createElement)(v,Object(c.a)(Object(c.a)({},e),{},{key:t,filterName:a,addFilter:d}))}))})]})})})]})},w=function(e){var t=e.keyword,a=e.appliedFilters,i=e.possibleFilters,l=e.attributes,o=e.recordsCount,d=e.setKeyword,b=e.updateAttribute,u=e.addFilter,m=Object(n.useState)(t),p=Object(s.a)(m,2),h=p[0],f=p[1],O=Object(j.a)(),g=O.t,v=(O.i18n,Object(n.useCallback)(x()((function(e){d(e)}),500),[x.a]));return Object(r.jsxs)("div",{className:"cz-sidebar rounded-lg box-shadow-lg",id:"shop-sidebar",children:[Object(r.jsx)("div",{className:"cz-sidebar-header box-shadow-sm",children:Object(r.jsxs)("button",{className:"close ml-auto",type:"button","data-dismiss":"sidebar","aria-label":"Close",children:[Object(r.jsxs)("span",{className:"d-inline-block font-size-xs font-weight-normal align-middle",children:[g("frontend.core.close_sidebar")," "]}),Object(r.jsx)("span",{className:"d-inline-block align-middle ml-2","aria-hidden":"true",children:Object(r.jsx)("i",{className:"far fa-times"})})]})}),Object(r.jsx)("div",{className:"cz-sidebar-body","data-simplebar":!0,"data-simplebar-auto-hide":"true",children:Object(r.jsxs)("div",{className:"widget widget-categories mb-3",children:[Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("h3",{className:"widget-title col",children:g("frontend.core.filters")}),Object(r.jsx)("span",{className:"text-right col",children:"".concat(o," ").concat(g("frontend.core.results"))})]}),Object(r.jsxs)("div",{className:"input-group-overlay input-group-sm mb-2",children:[Object(r.jsx)("input",{className:"cz-filter-search form-control form-control-sm appended-form-control",type:"text",value:h,onChange:function(e){f(e.target.value),v(e.target.value)},placeholder:g("frontend.plp.search.placeholder")}),Object(r.jsx)("div",{className:"input-group-append-overlay",children:Object(r.jsx)("span",{className:"input-group-text",children:Object(r.jsx)("i",{className:"fa fa-search"})})})]}),Object(r.jsxs)("div",{className:"accordion mt-3 border-top",id:"shop-categories",children:[i&&i.map((function(e,t){return Object(r.jsx)(y,Object(c.a)(Object(c.a)({appliedFilters:a,index:"filter".concat(t)},e),{},{addFilter:u,updateAttribute:b}),t)})),l&&l.map((function(e,t){return Object(r.jsx)(y,Object(c.a)(Object(c.a)({appliedFilters:a,type:"attribute",index:"attr".concat(t)},e),{},{addFilter:u,updateAttribute:b}),t)}))]})]})})]})},k=a(286),C=a(26),F=a.n(C),P=a(8);t.default=function(){var e=Object(l.c)(),t=Object(n.useState)({pageRecords:[],limitCountTotal:"",currentPage:"",pageRecordsCount:"",pageRecordsEnd:"",pageRecordsShow:"",pageRecordsStart:"",recordsCount:"",totalPages:"",isFetching:!1,err:null}),a=Object(s.a)(t,2),o=a[0],j=a[1],u=Object(n.useState)({possibleFilters:[],attributes:[],appliedFilters:[],keyword:"",sortBy:"calculatedSalePrice|ASC",sortingOptions:[]}),m=Object(s.a)(u,2),p=m[0],h=m[1],O=function(e){var t=e.pageNumber,a=e.sortBy,s=(null===a||void 0===a?void 0:a.split("|"))?a:p.sortBy.split("|");P.a.products.list({perPage:9,page:t||o.currentPage,sort:s[0],sortOrder:s[1],filter:{publishedFlag:!0,"productName:like":"%".concat(p.keyword,"%")}}).then((function(e){if(console.log("response",e),!e.isFail()){var t=e.success();console.log("request",t),j(Object(c.a)(Object(c.a)({},o),t))}}))};return Object(n.useEffect)((function(){F()({method:"GET",withCredentials:!0,url:"".concat(P.b,"api/scope/getProductListingOptions"),headers:{"Content-Type":"application/json"}}).then((function(e){200===e.status&&h(Object(c.a)(Object(c.a)({},p),e.data))})),O({})}),[e]),console.log("data",o),Object(r.jsxs)(i.k,{children:[Object(r.jsx)(k.a,{}),Object(r.jsx)("div",{className:"container pb-5 mb-2 mb-md-4",children:Object(r.jsxs)("div",{className:"row",children:[Object(r.jsx)("aside",{className:"col-lg-4",children:Object(r.jsx)(w,Object(c.a)(Object(c.a)({},p),{},{recordsCount:o.recordsCount,setKeyword:function(e){console.log("setKeyword",e)},addFilter:function(e){console.log("addFilter",e)},updateAttribute:function(e){console.log("updateAttribute",e)}}))}),Object(r.jsxs)("div",{className:"col-lg-8",children:[Object(r.jsx)(b,Object(c.a)(Object(c.a)({},p),{},{removeFilter:function(e){console.log("removeFilter, filter")},setSort:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.sortBy,t=e.split("|");console.log("setSort",t)}})),Object(r.jsx)(d,{pageRecords:o.pageRecords}),Object(r.jsx)(f,{recordsCount:o.recordsCount,currentPage:o.currentPage,totalPages:o.totalPages,setPage:function(e){O(e)}})]})]})})]})}}}]);
//# sourceMappingURL=15.479dff29.chunk.js.map