{"version":3,"sources":["directives/common/validation/swvalidationunique.ts"],"names":[],"mappings":"AAAA,AAGA;;GADG;AACH,OAAO,CAAC,MAAM,CAAC,eAAe,CAAC,CAAC,SAAS,CAAC,oBAAoB,EAAE,CAAC,OAAO,EAAC,IAAI,EAAC,WAAW,EAAC,MAAM,EAAG,UAAS,KAAK,EAAC,EAAE,EAAC,SAAS,EAAE,IAAI;IACnI,MAAM,CAAC;QACN,QAAQ,EAAG,GAAG;QACd,OAAO,EAAG,SAAS;QACnB,IAAI,EAAG,UAAS,KAAK,EAAE,OAAO,EAAE,UAAU,EAAE,OAAO;YAClD,OAAO,CAAC,gBAAgB,CAAC,kBAAkB,GAAG,UAAU,UAAU,EAAE,SAAS;gBAC5E,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;gBACP,IAAI,QAAQ,GAAG,EAAE,CAAC,KAAK,EAAE,EACrB,YAAY,GAAG,UAAU,IAAI,SAAS,EACtC,GAAG,GAAG,KAAK,CAAC,eAAe,CAAC,MAAM,CAAC,QAAQ,CAAC,SAAS,EACrD,QAAQ,GAAG,KAAK,CAAC,eAAe,CAAC,QAAQ,CAAC;gBAC9C,AAGA,uDAHuD;gBACvD,2CAA2C;gBAC3C,uDAAuD;gBACvD,EAAE,CAAC,CAAC,GAAG,IAAI,QAAQ,CAAC,CAAC,CAAC;oBAClB,SAAS,CAAC,gBAAgB,CAAC,GAAG,EAAE,QAAQ,EAAE,YAAY,CAAC,CACtD,IAAI,CAAC,UAAU,MAAM;wBACrB,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;wBACzB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;wBAEhB,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC;4BACT,QAAQ,CAAC,OAAO,EAAE,EAAE,aAAa;wBACrC,CAAC,GADsB;wBAEvB,IAAI,CAAC,CAAC;4BACF,QAAQ,CAAC,MAAM,EAAE,EAAE,uBAAuB;wBAC9C,CAAC,GADqB;oBAE1B,CAAC,CAAC,CAAC;gBACP,CAAC;gBACD,IAAI,CAAC,CAAC;oBACF,QAAQ,CAAC,OAAO,EAAE,EAAE,4CAA4C;gBACnE,CAAC,GADqB;gBAGvB,MAAM,CAAC,QAAQ,CAAC,OAAO,CAAC;YAC5B,CAAC,CAAC;QAEZ,CAAC;KACD,CAAC;AACH,CAAC,CAAC,CAAC,CAAC","file":"directives/common/validation/swvalidationunique.js","sourceRoot":"/Users/david/Sites/Slatwall/","sourcesContent":["/**\n * Validates true if the given object is 'unique' and false otherwise.\n */\nangular.module('slatwalladmin').directive(\"swvalidationunique\", ['$http','$q','$slatwall','$log',  function($http,$q,$slatwall, $log) {\n\treturn {\n\t\trestrict : \"A\",\n\t\trequire : \"ngModel\",\n\t\tlink : function(scope, element, attributes, ngModel) {\n\t\t\tngModel.$asyncValidators.swvalidationunique = function (modelValue, viewValue) {\n\t\t\t\t$log.debug('asyc');\n                var deferred = $q.defer(),\n                    currentValue = modelValue || viewValue,\n                    key = scope.propertyDisplay.object.metaData.className,\n                    property = scope.propertyDisplay.property;\n                //First time the asyncValidators function is loaded the\n                //key won't be set  so ensure that we have \n                //key and propertyName before checking with the server \n                if (key && property) {\n                    $slatwall.checkUniqueValue(key, property, currentValue)\n                    .then(function (unique) {\n                    \t$log.debug('uniquetest');\n                    \t$log.debug(unique);\n                    \t\n                        if (unique) {\n                            deferred.resolve(); //It's unique\n                        }\n                        else {\n                            deferred.reject(); //Add unique to $errors\n                        }\n                    });\n                }\n                else {\n                    deferred.resolve(); //Ensure promise is resolved if we hit this \n                 }\n\n                return deferred.promise;\n            };\n\t\t\t\n\t\t}\n\t};\n}]);"]}