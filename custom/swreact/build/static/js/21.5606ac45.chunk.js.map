{"version":3,"sources":["pages/Search/Search.js"],"names":["Search","loc","useLocation","t","useTranslation","params","queryString","parse","search","arrayFormat","arrayFormatSeparator","history","useHistory","useGetEntity","productTypeListRequest","setProductTypeListRequest","productTypeBase","useSelector","state","configuration","filtering","productTypeUrl","useEffect","isFetching","isLoaded","entity","searchKeyword","keyword","includeSettingsInList","makeRequest","unload","listen","location","newParams","Object","keys","length","productTypeData","augmentProductType","data","title","crumbs","filter","productType","productTypeIDPath","includes","productTypeID","map","crumb","productTypeName","urlTitle","pathname","stringify","key","childProductTypes","onSelect","push","className","role","preFilter","productType_slug","hide"],"mappings":"8NAwFeA,UA7EA,WAAO,IAAD,IACbC,EAAMC,cACJC,EAAMC,cAAND,EACJE,EAASC,IAAYC,MAAMN,EAAIO,OAAQ,CAAEC,YAAa,YAAaC,qBAAsB,MAEvFC,EAAUC,cALG,EAOyCC,cAPzC,mBAOZC,EAPY,KAOYC,EAPZ,KAQbC,EAAkBC,aAAY,SAAAC,GAAK,OAAIA,EAAMC,cAAcC,UAAUJ,mBACrEK,EAAiBhB,EAAM,KAAWW,EAExCM,qBAAU,WACHR,EAAuBS,YAAeT,EAAuBU,UAChET,EAA0B,2BAAKD,GAAN,IAA8BS,YAAY,EAAMC,UAAU,EAAOC,OAAQ,cAAepB,OAAQ,CAAEqB,cAAa,OAAErB,QAAF,IAAEA,OAAF,EAAEA,EAAQsB,QAAS,SAAU,IAAKC,uBAAuB,GAAQC,aAAa,OAEvN,CAACR,EAAgBhB,EAAQS,EAAwBC,IAEpDO,qBAAU,WACR,IAAMQ,EAASnB,EAAQoB,QAAO,SAAAC,GAC5B,IAAIC,EAAY3B,IAAYC,MAAMyB,EAASxB,OAAQ,CAAEC,YAAa,YAAaC,qBAAsB,MAC/D,IAAlCwB,OAAOC,KAAKF,GAAWG,QACzBrB,EAA0B,2BAAKD,GAAN,IAA8BS,YAAY,EAAMC,UAAU,EAAOC,OAAQ,cAAepB,OAAQ,CAAEqB,cAAa,OAAEO,QAAF,IAAEA,OAAF,EAAEA,EAAWN,QAAS,SAAU,IAAKC,uBAAuB,GAAQC,aAAa,QAG7N,OAAO,WACLC,OAED,CAAChB,EAAwBC,EAA2BJ,IAEvD,IAAM0B,EAAkBC,YAAmBjB,EAAgBP,EAAuByB,MAElF,OACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAQC,MAAK,mBAAcnC,EAAM,WAEhCS,EAAuBU,UACtB,cAAC,IAAD,CACEgB,MAAO,GACPC,OAAQ3B,EAAuByB,KAC5BG,QAAO,SAAAC,GAAgB,IAAD,EACrB,cAAON,QAAP,IAAOA,GAAP,UAAOA,EAAiBO,yBAAxB,aAAO,EAAoCC,SAASF,EAAYG,kBAEjEC,KAAI,SAAAC,GACH,MAAO,CAAER,MAAOQ,EAAMC,gBAAiBC,SAAUF,EAAME,aAExDR,QAAO,SAAAM,GAAK,OAAIA,EAAME,WAAalC,KACnC0B,QAAO,SAAAM,GAAK,OAAIA,EAAME,WAAa7C,EAAM,OACzC0C,KAAI,SAAAC,GACH,OAAO,2BAAKA,GAAZ,IAAmBE,SAAS,GAAD,OAAKjD,EAAIkD,SAAT,YAAqB7C,IAAY8C,UAAZ,2BAA2B/C,GAA3B,IAAmCgD,IAAKL,EAAME,WAAY,CAAEzC,YAAa,kBAKhIK,EAAuBU,WAAY,UAAAa,EAAgBiB,yBAAhB,eAAmClB,QAAS,GAC9E,cAAC,IAAD,CACEG,KAAMF,EACNkB,SAAU,SAAAL,GACR7C,EAAM,IAAU6C,EAChBvC,EAAQ6C,KAAR,UAAgBvD,EAAIkD,SAApB,YAAgC7C,IAAY8C,UAAU/C,EAAQ,CAAEI,YAAa,gBAIjFK,EAAuBS,YAAcT,EAAuBU,UAAgE,IAApDU,OAAOC,KAAKrB,EAAuByB,MAAMH,QACjH,qBAAKqB,UAAU,kDAAf,SACE,qBAAKA,UAAU,MAAf,SACE,qBAAKA,UAAU,mBAAmBC,KAAK,QAAvC,mBACMvD,EAAE,8BADR,mBACyCE,QADzC,IACyCA,OADzC,EACyCA,EAAQsB,eAMtDb,EAAuBU,UAA2D,KAAhC,OAAfa,QAAe,IAAfA,GAAA,UAAAA,EAAiBiB,yBAAjB,eAAoClB,SAAgB,cAAC,IAAD,CAAauB,UAAW,CAAEC,iBAAkBvC,GAAkBwC,KAAM,CAAC","file":"static/js/21.5606ac45.chunk.js","sourcesContent":["import { Helmet } from 'react-helmet'\nimport { Layout, PageHeader, ProductTypeList } from '../../components'\nimport ListingPage from '../../components/Listing/Listing'\nimport { useHistory, useLocation } from 'react-router'\nimport { useGetEntity } from '../../hooks/useAPI'\nimport { useSelector } from 'react-redux'\nimport queryString from 'query-string'\nimport { useEffect } from 'react'\nimport { augmentProductType } from '../../utils'\nimport { useTranslation } from 'react-i18next'\n\nconst Search = () => {\n  const loc = useLocation()\n  const { t } = useTranslation()\n  let params = queryString.parse(loc.search, { arrayFormat: 'separator', arrayFormatSeparator: ',' })\n\n  const history = useHistory()\n\n  const [productTypeListRequest, setProductTypeListRequest] = useGetEntity()\n  const productTypeBase = useSelector(state => state.configuration.filtering.productTypeBase)\n  const productTypeUrl = params['key'] || productTypeBase\n\n  useEffect(() => {\n    if (!productTypeListRequest.isFetching && !productTypeListRequest.isLoaded) {\n      setProductTypeListRequest({ ...productTypeListRequest, isFetching: true, isLoaded: false, entity: 'ProductType', params: { searchKeyword: params?.keyword, 'p:show': 250, includeSettingsInList: true }, makeRequest: true })\n    }\n  }, [productTypeUrl, params, productTypeListRequest, setProductTypeListRequest])\n\n  useEffect(() => {\n    const unload = history.listen(location => {\n      let newParams = queryString.parse(location.search, { arrayFormat: 'separator', arrayFormatSeparator: ',' })\n      if (Object.keys(newParams).length === 1) {\n        setProductTypeListRequest({ ...productTypeListRequest, isFetching: true, isLoaded: false, entity: 'ProductType', params: { searchKeyword: newParams?.keyword, 'p:show': 250, includeSettingsInList: true }, makeRequest: true })\n      }\n    })\n    return () => {\n      unload()\n    }\n  }, [productTypeListRequest, setProductTypeListRequest, history])\n\n  const productTypeData = augmentProductType(productTypeUrl, productTypeListRequest.data)\n\n  return (\n    <Layout>\n      <Helmet title={`Search - ${params['keyword']}`} />\n\n      {productTypeListRequest.isLoaded && (\n        <PageHeader\n          title={''}\n          crumbs={productTypeListRequest.data\n            .filter(productType => {\n              return productTypeData?.productTypeIDPath?.includes(productType.productTypeID)\n            })\n            .map(crumb => {\n              return { title: crumb.productTypeName, urlTitle: crumb.urlTitle }\n            })\n            .filter(crumb => crumb.urlTitle !== productTypeBase)\n            .filter(crumb => crumb.urlTitle !== params['key'])\n            .map(crumb => {\n              return { ...crumb, urlTitle: `${loc.pathname}?${queryString.stringify({ ...params, key: crumb.urlTitle }, { arrayFormat: 'comma' })}` }\n            })}\n        />\n      )}\n\n      {productTypeListRequest.isLoaded && productTypeData.childProductTypes?.length > 0 && (\n        <ProductTypeList\n          data={productTypeData}\n          onSelect={urlTitle => {\n            params['key'] = urlTitle\n            history.push(`${loc.pathname}?${queryString.stringify(params, { arrayFormat: 'comma' })}`)\n          }}\n        />\n      )}\n      {!productTypeListRequest.isFetching && productTypeListRequest.isLoaded && Object.keys(productTypeListRequest.data).length === 0 && (\n        <div className=\"container bg-light box-shadow-lg rounded-lg p-5\">\n          <div className=\"row\">\n            <div className=\"alert alert-info\" role=\"alert\">\n              {`${t('frontend.search.no_results')} ${params?.keyword}`}\n            </div>\n          </div>\n        </div>\n      )}\n\n      {productTypeListRequest.isLoaded && productTypeData?.childProductTypes?.length === 0 && <ListingPage preFilter={{ productType_slug: productTypeUrl }} hide={['productType']} />}\n    </Layout>\n  )\n}\n\nexport default Search\n\n// <div className=\"container pb-2 pt-5 border-bottom d-none\">\n// <div className=\"product-section mb-3\">\n//   <h2 className=\"h5\">Keyblanks & Automotive</h2>\n//   <div className=\"row\">\n//     <div className=\"col-xl-4 col-md-6 col-12 mb-3\">\n//       <div className=\"card bg-lightgray border-0\">\n//         <div className=\"card-body\">\n//           <h3 className=\"h5\">\n//             <button className=\"link-button\">Electronic Hardware</button>\n//           </h3>\n//           <ul className=\"two-cols d-flex flex-wrap list-unstyled font-size-sm mb-0\">\n//             <li className=\"d-flex\">\n//               <button className=\"link-button nav-link-style\">\n//                 <i className=\"far fa-chevron-circle-right pr-2\"></i>Pushbutton Locks\n//               </button>\n//             </li>\n//             <li className=\"d-flex\">\n//               <button className=\"link-button nav-link-style\">\n//                 <i className=\"far fa-chevron-circle-right pr-2\"></i>Pushbutton Parts &amp; Accessories\n//               </button>\n//             </li>\n//             <li className=\"d-flex\">\n//               <button className=\"link-button nav-link-style\">\n//                 <i className=\"far fa-chevron-circle-right pr-2\"></i>Electronic Standalone\n//               </button>\n//             </li>\n//             <li className=\"d-flex\">\n//               <button className=\"link-button nav-link-style\">\n//                 <i className=\"far fa-chevron-circle-right pr-2\"></i>Electronic Networked\n//               </button>\n//             </li>\n//             <li className=\"d-flex\">\n//               <button className=\"link-button nav-link-style\">\n//                 <i className=\"far fa-chevron-circle-right pr-2\"></i>Access Control\n//               </button>\n//             </li>\n//           </ul>\n//         </div>\n//       </div>\n//     </div>\n//     <div className=\"col-xl-4 col-md-6 col-12 mb-3\">\n//       <div className=\"card bg-lightgray border-0\">\n//         <div className=\"card-body\">\n//           <h3 className=\"h5\">\n//             <button className=\"link-button\">Electronic Hardware</button>\n//           </h3>\n//           <ul className=\"two-cols d-flex flex-wrap list-unstyled font-size-sm mb-0\">\n//             <li className=\"d-flex\">\n//               <button className=\"link-button nav-link-style\">\n//                 <i className=\"far fa-chevron-circle-right pr-2\"></i>Pushbutton Locks\n//               </button>\n//             </li>\n//             <li className=\"d-flex\">\n//               <button className=\"link-button nav-link-style\">\n//                 <i className=\"far fa-chevron-circle-right pr-2\"></i>Pushbutton Parts &amp; Accessories\n//               </button>\n//             </li>\n//           </ul>\n//         </div>\n//       </div>\n//     </div>\n//     <div className=\"col-xl-4 col-md-6 col-12 mb-3\">\n//       <div className=\"card bg-lightgray border-0\">\n//         <div className=\"card-body\">\n//           <h3 className=\"h5\">\n//             <button className=\"link-button\">Electronic Hardware</button>\n//           </h3>\n//           <ul className=\"two-cols d-flex flex-wrap list-unstyled font-size-sm mb-0\">\n//             <li className=\"d-flex\">\n//               <button className=\"link-button nav-link-style\">\n//                 <i className=\"far fa-chevron-circle-right pr-2\"></i>Pushbutton Locks\n//               </button>\n//             </li>\n//           </ul>\n//         </div>\n//       </div>\n//     </div>\n//   </div>\n// </div>\n\n// <div className=\"product-section mb-3\">\n//   <h2 className=\"h5\">Keyblanks & Automotive</h2>\n//   <div className=\"row\">\n//     <div className=\"col-xl-4 col-md-6 col-12 mb-3\">\n//       <div className=\"card bg-lightgray border-0\">\n//         <div className=\"card-body\">\n//           <h3 className=\"h5\">\n//             <button className=\"link-button\">Electronic Hardware</button>\n//           </h3>\n//           <ul className=\"two-cols d-flex flex-wrap list-unstyled font-size-sm mb-0\">\n//             <li className=\"d-flex\">\n//               <button className=\"link-button nav-link-style\">\n//                 <i className=\"far fa-chevron-circle-right pr-2\"></i>Pushbutton Locks\n//               </button>\n//             </li>\n//             <li className=\"d-flex\">\n//               <button className=\"link-button nav-link-style\">\n//                 <i className=\"far fa-chevron-circle-right pr-2\"></i>Pushbutton Parts &amp; Accessories\n//               </button>\n//             </li>\n//           </ul>\n//         </div>\n//       </div>\n//     </div>\n//     <div className=\"col-xl-4 col-md-6 col-12 mb-3\">\n//       <div className=\"card bg-lightgray border-0\">\n//         <div className=\"card-body\">\n//           <h3 className=\"h5\">\n//             <button className=\"link-button\">Electronic Hardware</button>\n//           </h3>\n//           <ul className=\"two-cols d-flex flex-wrap list-unstyled font-size-sm mb-0\">\n//             <li className=\"d-flex\">\n//               <button className=\"link-button nav-link-style\">\n//                 <i className=\"far fa-chevron-circle-right pr-2\"></i>Pushbutton Locks\n//               </button>\n//             </li>\n//           </ul>\n//         </div>\n//       </div>\n//     </div>\n//   </div>\n// </div>\n// </div>\n"],"sourceRoot":""}