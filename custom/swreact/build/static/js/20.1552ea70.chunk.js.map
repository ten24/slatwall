{"version":3,"sources":["pages/Search/Search.js"],"names":["Search","loc","useLocation","params","queryString","parse","search","arrayFormat","arrayFormatSeparator","history","useHistory","useGetEntity","productTypeListRequest","setProductTypeListRequest","productTypeBase","useSelector","state","configuration","filtering","productTypeUrl","useEffect","isFetching","isLoaded","entity","searchKeyword","keyword","includeSettingsInList","makeRequest","unload","listen","location","newParams","Object","keys","length","data","to","productTypeData","augmentProductType","className","title","crumbs","filter","productType","productTypeIDPath","includes","productTypeID","map","crumb","productTypeName","urlTitle","pathname","stringify","key","childProductTypes","onSelect","push","preFilter","productType_slug","hide"],"mappings":"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","file":"static/js/20.1552ea70.chunk.js","sourcesContent":["import { Helmet } from 'react-helmet'\nimport { Layout, PageHeader, ProductTypeList } from '../../components'\nimport ListingPage from '../../components/Listing/Listing'\nimport { Redirect, useHistory, useLocation } from 'react-router'\nimport { useGetEntity } from '../../hooks/useAPI'\nimport { useSelector } from 'react-redux'\nimport queryString from 'query-string'\nimport { useEffect } from 'react'\nimport { augmentProductType } from '../../utils'\n\nconst Search = () => {\n  const loc = useLocation()\n  let params = queryString.parse(loc.search, { arrayFormat: 'separator', arrayFormatSeparator: ',' })\n\n  const history = useHistory()\n\n  const [productTypeListRequest, setProductTypeListRequest] = useGetEntity()\n  const productTypeBase = useSelector(state => state.configuration.filtering.productTypeBase)\n  const productTypeUrl = params['key'] || productTypeBase\n\n  useEffect(() => {\n    setProductTypeListRequest({ ...productTypeListRequest, isFetching: true, isLoaded: false, entity: 'ProductType', params: { searchKeyword: params?.keyword, 'p:show': 250, includeSettingsInList: true }, makeRequest: true })\n  }, [productTypeUrl, params.keyword])\n\n  useEffect(() => {\n    const unload = history.listen(location => {\n      let newParams = queryString.parse(location.search, { arrayFormat: 'separator', arrayFormatSeparator: ',' })\n      if (Object.keys(newParams).length === 1) {\n        setProductTypeListRequest({ ...productTypeListRequest, isFetching: true, isLoaded: false, entity: 'ProductType', params: { searchKeyword: newParams?.keyword, 'p:show': 250, includeSettingsInList: true }, makeRequest: true })\n      }\n    })\n    return () => {\n      unload()\n    }\n  }, [productTypeListRequest, setProductTypeListRequest, history])\n\n  if (!productTypeListRequest.isFetching && productTypeListRequest.isLoaded && Object.keys(productTypeListRequest.data).length === 0) {\n    return <Redirect to=\"/404\" />\n  }\n\n  const productTypeData = augmentProductType(productTypeUrl, productTypeListRequest.data)\n\n  return (\n    <Layout>\n      <div className=\"container pb-2 pt-5 border-bottom d-none\">\n        <div className=\"product-section mb-3\">\n          <h2 className=\"h5\">Keyblanks & Automotive</h2>\n          <div className=\"row\">\n            <div className=\"col-xl-4 col-md-6 col-12 mb-3\">\n              <div className=\"card bg-lightgray border-0\">\n                <div className=\"card-body\">\n                  <h3 className=\"h5\">\n                    <button className=\"link-button\">Electronic Hardware</button>\n                  </h3>\n                  <ul className=\"two-cols d-flex flex-wrap list-unstyled font-size-sm mb-0\">\n                    <li className=\"d-flex\">\n                      <button className=\"link-button nav-link-style\">\n                        <i className=\"far fa-chevron-circle-right pr-2\"></i>Pushbutton Locks\n                      </button>\n                    </li>\n                    <li className=\"d-flex\">\n                      <button className=\"link-button nav-link-style\">\n                        <i className=\"far fa-chevron-circle-right pr-2\"></i>Pushbutton Parts &amp; Accessories\n                      </button>\n                    </li>\n                    <li className=\"d-flex\">\n                      <button className=\"link-button nav-link-style\">\n                        <i className=\"far fa-chevron-circle-right pr-2\"></i>Electronic Standalone\n                      </button>\n                    </li>\n                    <li className=\"d-flex\">\n                      <button className=\"link-button nav-link-style\">\n                        <i className=\"far fa-chevron-circle-right pr-2\"></i>Electronic Networked\n                      </button>\n                    </li>\n                    <li className=\"d-flex\">\n                      <button className=\"link-button nav-link-style\">\n                        <i className=\"far fa-chevron-circle-right pr-2\"></i>Access Control\n                      </button>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n            <div className=\"col-xl-4 col-md-6 col-12 mb-3\">\n              <div className=\"card bg-lightgray border-0\">\n                <div className=\"card-body\">\n                  <h3 className=\"h5\">\n                    <button className=\"link-button\">Electronic Hardware</button>\n                  </h3>\n                  <ul className=\"two-cols d-flex flex-wrap list-unstyled font-size-sm mb-0\">\n                    <li className=\"d-flex\">\n                      <button className=\"link-button nav-link-style\">\n                        <i className=\"far fa-chevron-circle-right pr-2\"></i>Pushbutton Locks\n                      </button>\n                    </li>\n                    <li className=\"d-flex\">\n                      <button className=\"link-button nav-link-style\">\n                        <i className=\"far fa-chevron-circle-right pr-2\"></i>Pushbutton Parts &amp; Accessories\n                      </button>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n            <div className=\"col-xl-4 col-md-6 col-12 mb-3\">\n              <div className=\"card bg-lightgray border-0\">\n                <div className=\"card-body\">\n                  <h3 className=\"h5\">\n                    <button className=\"link-button\">Electronic Hardware</button>\n                  </h3>\n                  <ul className=\"two-cols d-flex flex-wrap list-unstyled font-size-sm mb-0\">\n                    <li className=\"d-flex\">\n                      <button className=\"link-button nav-link-style\">\n                        <i className=\"far fa-chevron-circle-right pr-2\"></i>Pushbutton Locks\n                      </button>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"product-section mb-3\">\n          <h2 className=\"h5\">Keyblanks & Automotive</h2>\n          <div className=\"row\">\n            <div className=\"col-xl-4 col-md-6 col-12 mb-3\">\n              <div className=\"card bg-lightgray border-0\">\n                <div className=\"card-body\">\n                  <h3 className=\"h5\">\n                    <button className=\"link-button\">Electronic Hardware</button>\n                  </h3>\n                  <ul className=\"two-cols d-flex flex-wrap list-unstyled font-size-sm mb-0\">\n                    <li className=\"d-flex\">\n                      <button className=\"link-button nav-link-style\">\n                        <i className=\"far fa-chevron-circle-right pr-2\"></i>Pushbutton Locks\n                      </button>\n                    </li>\n                    <li className=\"d-flex\">\n                      <button className=\"link-button nav-link-style\">\n                        <i className=\"far fa-chevron-circle-right pr-2\"></i>Pushbutton Parts &amp; Accessories\n                      </button>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n            <div className=\"col-xl-4 col-md-6 col-12 mb-3\">\n              <div className=\"card bg-lightgray border-0\">\n                <div className=\"card-body\">\n                  <h3 className=\"h5\">\n                    <button className=\"link-button\">Electronic Hardware</button>\n                  </h3>\n                  <ul className=\"two-cols d-flex flex-wrap list-unstyled font-size-sm mb-0\">\n                    <li className=\"d-flex\">\n                      <button className=\"link-button nav-link-style\">\n                        <i className=\"far fa-chevron-circle-right pr-2\"></i>Pushbutton Locks\n                      </button>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <Helmet title={`Search - ${params['keyword']}`} />\n\n      {productTypeListRequest.isLoaded && (\n        <PageHeader\n          title={''}\n          crumbs={productTypeListRequest.data\n            .filter(productType => {\n              return productTypeData?.productTypeIDPath?.includes(productType.productTypeID)\n            })\n            .map(crumb => {\n              return { title: crumb.productTypeName, urlTitle: crumb.urlTitle }\n            })\n            .filter(crumb => crumb.urlTitle !== productTypeBase)\n            .filter(crumb => crumb.urlTitle !== params['key'])\n            .map(crumb => {\n              return { ...crumb, urlTitle: `${loc.pathname}?${queryString.stringify({ ...params, key: crumb.urlTitle }, { arrayFormat: 'comma' })}` }\n            })}\n        />\n      )}\n      {productTypeListRequest.isLoaded && productTypeData.childProductTypes?.length > 0 && (\n        <ProductTypeList\n          data={productTypeData}\n          onSelect={urlTitle => {\n            params['key'] = urlTitle\n            history.push(`${loc.pathname}?${queryString.stringify(params, { arrayFormat: 'comma' })}`)\n          }}\n        />\n      )}\n      {productTypeListRequest.isLoaded && productTypeData?.childProductTypes?.length === 0 && <ListingPage preFilter={{ productType_slug: productTypeUrl }} hide={['productType']} />}\n    </Layout>\n  )\n}\n\nexport default Search\n"],"sourceRoot":""}