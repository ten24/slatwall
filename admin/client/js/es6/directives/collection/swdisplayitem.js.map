{"version":3,"sources":["directives/collection/swdisplayitem.ts"],"names":[],"mappings":"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","file":"directives/collection/swdisplayitem.js","sourceRoot":"/Users/david/Sites/Slatwall/","sourcesContent":["'use strict';\nangular.module('slatwalladmin')\n.directive('swDisplayItem', [\n\t'$http',\n\t'$compile',\n\t'$templateCache',\n\t'$log',\n\t'$slatwall',\n\t'$filter',\n\t'collectionPartialsPath',\n\t'collectionService',\n\t'metadataService',\n\tfunction(\n\t\t$http,\n\t\t$compile,\n\t\t$templateCache,\n\t\t$log,\n\t\t$slatwall,\n\t\t$filter,\n\t\tcollectionPartialsPath,\n\t\tcollectionService,\n\t\tmetadataService\n\t){\n\t\treturn {\n\t\t\trequire:'^swDisplayOptions',\n\t\t\trestrict: 'A',\n\t\t\tscope:{\n\t\t\t\tselectedProperty:\"=\",\n\t\t\t\tpropertiesList:\"=\",\n\t\t\t\tbreadCrumbs:\"=\",\n\t\t\t\tselectedPropertyChanged:\"&\"\n\t\t\t\t\n\t\t\t},\n\t\t\ttemplateUrl:collectionPartialsPath+\"displayitem.html\",\n\t\t\tlink: function(scope, element,attrs,displayOptionsController){\n\t\t\t\tscope.showDisplayItem = false;\n\t\t\t\t\n\t\t\t\tscope.selectedDisplayOptionChanged = function(selectedDisplayOption){\n\t\t\t\t\t\n\t\t\t\t\tvar breadCrumb = {\n\t\t\t\t\t\t\tentityAlias:scope.selectedProperty.name,\n\t\t\t\t\t\t\tcfc:scope.selectedProperty.cfc,\n\t\t\t\t\t\t\tpropertyIdentifier:scope.selectedProperty.propertyIdentifier\n\t\t\t\t\t};\n\t\t\t\t\tscope.breadCrumbs.push(breadCrumb);\n\t\t\t\t\tscope.selectedPropertyChanged({selectedProperty:selectedDisplayOption});\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tscope.$watch('selectedProperty', function(selectedProperty) {\n\t\t\t\t\tif(angular.isDefined(selectedProperty)){\n\t\t\t\t\t\tif(selectedProperty === null){\n\t\t\t\t\t\t\tscope.showDisplayItem = false;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(selectedProperty.$$group !== 'drilldown'){\n\t\t\t\t\t\t\tscope.showDisplayItem = false;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(selectedProperty.$$group === 'drilldown'){\n\t\t\t\t\t\t\tif(angular.isUndefined(scope.propertiesList[selectedProperty.propertyIdentifier])){\n\t\t\t\t\t\t\t\tvar filterPropertiesPromise = $slatwall.getFilterPropertiesByBaseEntityName(selectedProperty.cfc);\n\t\t\t\t\t\t\t\tfilterPropertiesPromise.then(function(value){\n\t\t\t\t\t\t\t\t\tmetadataService.setPropertiesList(value,selectedProperty.propertyIdentifier);\n\t\t\t\t\t\t\t\t\tscope.propertiesList[selectedProperty.propertyIdentifier] = metadataService.getPropertiesListByBaseEntityAlias(selectedProperty.propertyIdentifier);\n\t\t\t\t\t\t\t\t\tmetadataService.formatPropertiesList(scope.propertiesList[selectedProperty.propertyIdentifier],selectedProperty.propertyIdentifier);\n\t\t\t\t\t\t\t\t}, function(reason){\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tscope.showDisplayItem = true;\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}\n]);\n\t\n"]}