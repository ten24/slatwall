(this.webpackJsonpstoneandberg=this.webpackJsonpstoneandberg||[]).push([[19],{522:function(t,e,a){"use strict";a.r(e);var o=a(2),r=a(33),i=a(5),n=a(1),s=a(31),c=a(21),d=a(18),u=a(24),p=a.n(u),l=a(145),b=a(3),h=a(10),f=a(0),j=function(t,e){var a=p.a.parse(t,{arrayFormat:"separator",arrayFormatSeparator:","});return Object.keys(a).map((function(t){return e.map((function(e){var o=e.options.filter((function(e){return e.optionCode===a[t]}))[0];return o?o.optionID:null})).filter((function(t){return t}))})).join()};e.default=function(t){var e=Object(c.h)(),a=Object(c.g)(),u=Object(d.i)(),g=Object(i.a)(u,2),O=g[0],m=g[1],k=Object(d.g)(),F=Object(i.a)(k,2),L=F[0],v=F[1],y=Object(n.useState)(e.pathname),D=Object(i.a)(y,2),I=D[0],S=D[1],T=Object(b.c)(h.r),q=p.a.parse(e.search,{arrayFormat:"separator",arrayFormatSeparator:","}),x=Object(b.c)((function(t){return t.configuration.filtering.productTypeBase}));return Object(n.useEffect)((function(){if(L.isLoaded&&!Object.keys(q).length){console.log("Redirect to Default Sku");var t=(o=L.data.defaultSelectedOptions,L.data.optionGroups.map((function(t){return t.options.filter((function(t){return o.includes(t.optionID)})).map((function(e){var a={};return a[t.optionGroupCode]=e.optionCode,a}))})).flat());a.push({pathname:e.pathname,search:p.a.stringify(Object.assign.apply(Object,Object(r.a)(t)),{arrayFormat:"comma"})})}var o}),[a,q,e.pathname,L]),Object(n.useEffect)((function(){if(!L.isFetching&&!L.isLoaded){console.log("First and only product request");var t=e.pathname.split("/").reverse();v({data:[],error:"",entity:"product",params:{urlTitle:t[0]},makeRequest:!0,isFetching:!0,isLoaded:!1})}}),[e.pathname,v,L.isFetching,L.isLoaded]),Object(n.useEffect)((function(){if(L.isLoaded&&!O.isFetching&&!O.isLoaded&&!O.isFetching){console.log("First and only option request");var t=j(e.search,L.data.optionGroups);m(Object(o.a)(Object(o.a)({},O),{},{isFetching:!0,isLoaded:!1,params:{productID:L.data.productID,skuID:q.skuid,selectedOptionIDList:t.length?t:L.data.defaultSelectedOptions},makeRequest:!0}))}}),[m,O,q.skuid,e.search,L]),Object(n.useEffect)((function(){var t=a.listen((function(t){if(I!==t.pathname){console.log("product change");var e=t.pathname.split("/").reverse();S(t.pathname),v({data:[],error:"",entity:"product",params:{urlTitle:e[0]},makeRequest:!0,isFetching:!0,isLoaded:!1}),m({data:{sku:{}},error:"",params:{},makeRequest:!1,isFetching:!1,isLoaded:!1}),window.scrollTo({top:0,behavior:"smooth"})}else if(!L.isFetching&&L.isLoaded&&!O.isLoaded&&!O.isFetching){console.log("option change");var a=j(t.search,L.data.optionGroups);m({data:{sku:{}},error:"",isFetching:!0,isLoaded:!1,params:{productID:L.data.productID,selectedOptionIDList:a},makeRequest:!0})}}));return function(){t()}}),[I,S,a,v,L,m,O]),!L.isFetching&&L.isLoaded&&L.data&&0===Object.keys(L.data).length?Object(f.jsx)(c.a,{to:"/404"}):Object(f.jsx)(s.Q,{children:Object(f.jsxs)("div",{className:"bg-light p-0",children:[L.isLoaded&&Object(f.jsx)(s.qb,{title:L.data.productSeries,children:Object(f.jsx)(s.s,{crumbs:L.data.breadcrumbs.map((function(t){return{title:t.productTypeName,urlTitle:"/".concat(T,"/").concat(t.urlTitle)}})).filter((function(t){return t.urlTitle!=="/".concat(T,"/").concat(x)}))})}),L.isLoaded&&Object(f.jsx)(l.a,{title:L.data.settings.productHTMLTitleString}),L.isLoaded&&L.data.productID&&O.isLoaded&&Object(f.jsx)(s.pb,{attributeSets:L.attributeSets,product:L.data,sku:O.data.sku[0],skuID:O.data.skuID,availableSkuOptions:O.data.availableSkuOptions,productOptions:L.data.optionGroups,isFetching:O.isFetching||L.isFetching}),L.isLoaded&&L.data.productID&&Object(f.jsx)(s.yb,{productID:L.data.productID})]})})}}}]);
//# sourceMappingURL=19.4794a665.chunk.js.map