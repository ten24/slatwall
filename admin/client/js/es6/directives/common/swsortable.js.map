{"version":3,"sources":["directives/common/swsortable.ts"],"names":[],"mappings":"AAAA,YAAY,CAAC;AACb,OAAO,CAAC,MAAM,CAAC,eAAe,CAAC,CAC9B,SAAS,CAAC,aAAa,EAAE,CAAC,YAAY,EAAC,iBAAiB,EAAC,UAAS,UAAU,EAAE,eAAe;IAC1F,AACA,sEADsE;IACtE,eAAe,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,mBAAmB,EAAC,YAAY,CAAC,CAAC;IAElE,MAAM,CAAC,UAAS,WAAW;QACvB,IAAI,KAAK,GAAG,IAAI,CAAC;QAEjB,WAAW,CAAC,QAAQ,CAAC;YACjB,WAAW,EAAE,aAAa;YAC1B,OAAO,EAAE,GAAG;YACZ,IAAI,EAAE,GAAG;YACT,MAAM,EAAE,UAAS,KAAK,EAAE,EAAE;gBACtB,AACA,YADY;oBACR,KAAK,GAAG,KAAK,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;gBACrC,AACA,sBADsB;oBAClB,WAAW,GAAG,KAAK,CAAC,MAAM,CAAC;gBAC/B,AACA,oBADoB;oBAChB,KAAK,GAAG,EAAE,CAAC;gBAEf,AACA,kCADkC;gBAClC,WAAW,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,UAAS,KAAK;oBACtC,IAAI,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC;oBAEnB,AACA,qBADqB;wBACjB,QAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,EAAE,EAAE,CAAC,CAAC;oBAE5D,AACA,+BAD+B;oBAC/B,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC;oBAE5B,EAAE,CAAA,CAAC,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC;wBAChC,AACA,yCADyC;wBACzC,KAAK,CAAC,QAAQ,CAAC,GAAG,IAAI,CAAC;wBACvB,AACA,2BAD2B;wBAC3B,IAAI,CAAC,MAAM,EAAE,CAAC;oBAClB,CAAC;gBACL,CAAC,CAAC,CAAC;gBAEH,KAAK,CAAC,MAAM,CAAC,CAAC,EAAE,WAAW,CAAC,CAAC;gBAE7B,AACA,+DAD+D;gBAC/D,WAAW,CAAC,MAAM,CAAC,KAAK,CAAC,WAAW,EAAC,KAAK,CAAC,CAAC;gBAE5C,AACA,+BAD+B;gBAC/B,KAAK,CAAC,OAAO,EAAE,CAAC;YACpB,CAAC;SACJ,CAAC,CAAC;IACP,CAAC,CAAC;AAGN,CAAC,CAAC,CAAC,CAAC","file":"directives/common/swsortable.js","sourceRoot":"/Users/david/Sites/Slatwall/","sourcesContent":["'use strict';\nangular.module('slatwalladmin')\n.directive(\"sw:sortable\", ['expression','compiledElement',function(expression, compiledElement){\n    // add my:sortable-index to children so we know the index in the model\n    compiledElement.children().attr(\"sw:sortable-index\",\"{{$index}}\");\n    \n    return function(linkElement){\n        var scope = this;             \n        \n        linkElement.sortable({\n            placeholder: \"placeholder\",\n            opacity: 0.8,\n            axis: \"y\",\n            update: function(event, ui) {\n                // get model\n                var model = scope.$apply(expression);\n                // remember its length\n                var modelLength = model.length;\n                // rember html nodes\n                var items = [];\n\n                // loop through items in new order\n                linkElement.children().each(function(index) {\n                    var item = $(this);\n                    \n                    // get old item index\n                    var oldIndex = parseInt(item.attr(\"sw:sortable-index\"), 10);\n                    \n                    // add item to the end of model\n                    model.push(model[oldIndex]);\n\n                    if(item.attr(\"sw:sortable-index\")) {\n                        // items in original order to restore dom\n                        items[oldIndex] = item;\n                        // and remove item from dom\n                        item.detach();\n                    }\n                });\n                \n                model.splice(0, modelLength);\n\n                // restore original dom order, so angular does not get confused\n                linkElement.append.apply(linkElement,items);\n\n                // notify angular of the change\n                scope.$digest();\n            }\n        });\n    };\n\n\t\t\n}]);\n\t\n"]}