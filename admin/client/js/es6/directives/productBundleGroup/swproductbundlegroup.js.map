{"version":3,"sources":["directives/productBundleGroup/swproductbundlegroup.ts"],"names":["arrayContains"],"mappings":"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","file":"directives/productBundleGroup/swproductbundlegroup.js","sourceRoot":"/Users/david/Sites/Slatwall/","sourcesContent":["'use strict';\nangular.module('slatwalladmin')\n.directive('swProductBundleGroup', [\n\t'$http',\n\t'$log',\n\t'$timeout',\n\t'$slatwall',\n\t'productBundlePartialsPath',\n\t'productBundleService',\n\t'collectionService',\n\t'metadataService',\n\t'utilityService',\n\tfunction(\n\t\t$http,\n\t\t$log,\n\t\t$timeout,\n\t\t$slatwall,\n\t\tproductBundlePartialsPath,\n\t\tproductBundleService,\n\t\tcollectionService,\n\t\tmetadataService,\n\t\tutilityService\n\t){\n\t\treturn {\n\t\t\trequire:\"^swProductBundleGroups\",\n\t\t\trestrict: 'E',\n\t\t\ttemplateUrl:productBundlePartialsPath+\"productbundlegroup.html\",\n\t\t\tscope:{\n\t\t\t\tproductBundleGroup:\"=\",\n\t\t\t\tindex:\"=\",\n\t\t\t\taddProductBundleGroup:\"&\",\n\t\t\t\tformName:\"@\"\n\t\t\t},\n\t\t\tlink: function(scope, element,attrs,productBundleGroupsController){\n\t\t\t\tvar timeoutPromise;\n\t\t\t\tscope.$id = 'productBundleGroup';\n\t\t\t\t$log.debug('productBundleGroup');\n\t\t\t\t$log.debug(scope.productBundleGroup);\n\t\t\t\tscope.maxRecords = 10;\n                scope.recordsCount = 0;  \n                scope.pageRecordsStart = 0;\n                scope.pageRecordsEnd = 0;\n                scope.showAll = false;\n                scope.showAdvanced = false;\n                scope.currentPage = 1;\n                scope.pageShow = 10;\n                /**\n                 * Opens or closes the advanced dialog.\n                 */\n                scope.openCloseAndRefresh = function(){    \n                   scope.showAdvanced = !scope.showAdvanced;\n                   $log.debug(\"OpenAndCloseAndRefresh\");\n                   $log.debug(scope.productBundleGroup.data.skuCollectionConfig.filterGroups[0].filterGroup);\n                   $log.debug(\"Length:\" + scope.productBundleGroup.data.skuCollectionConfig.filterGroups[0].filterGroup.length);\n                   if(scope.productBundleGroup.data.skuCollectionConfig.filterGroups[0].filterGroup.length){\n                       scope.getCollection();\n                   }\n                   \n                }\n\t\t\t\tscope.removeProductBundleGroup = function(){\n\t\t\t\t\tproductBundleGroupsController.removeProductBundleGroup(scope.index);\n\t\t\t\t\tscope.productBundleGroup.$$delete();\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tscope.deleteEntity = function(type){\n\t\t\t\t\tif (angular.isNumber(type)){\n\t\t\t\t\t\t$log.debug(\"Deleting filter\");\n\t\t\t\t\t\tthis.removeProductBundleGroupFilter(type);\n\t\t\t\t\t}else{\n\t\t\t\t\t\t$log.debug(\"Removing bundle group\");\n\t\t\t\t\t\tthis.removeProductBundleGroup();\n\t\t\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tscope.collection = { \n\t\t\t\t\tbaseEntityName:\"Sku\",\n\t\t\t\t\tbaseEntityAlias:\"_sku\",\n\t\t\t\t\tcollectionConfig:scope.productBundleGroup.data.skuCollectionConfig,\n\t\t\t\t\tcollectionObject:'Sku'\n\t\t\t\t};\n                \n\t\t\t\t/**\n\t\t\t\t * Adds a collection to scope\n\t\t\t\t */\n\t\t\t\tscope.getCollection = function(){\n                \n\t\t\t\t\tvar options = {\n\t\t\t\t\t\t\tfilterGroupsConfig:angular.toJson(scope.productBundleGroup.data.skuCollectionConfig.filterGroups),\n\t\t\t\t\t\t\tcolumnsConfig:angular.toJson(scope.productBundleGroup.data.skuCollectionConfig.columns),\n\t\t\t\t\t\t\tcurrentPage:1, \n\t\t\t\t\t\t\tpageShow:10\n\t\t\t\t\t\t};\n\t\t\t\t\tvar collectionPromise = $slatwall.getEntity('Sku',options);\n\t\t\t\t\tcollectionPromise.then(function(response){\n\t\t\t\t\t\tscope.collection = response;\n                        $log.debug(\"Collection Response\");\n                        $log.debug(scope.collection);\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tscope.getCollection();\n\t\t\t\t\n\t\t\t\tscope.navigation = {\n\t\t\t\t\tvalue:'Basic',\n\t\t\t\t\tsetValue:function(value){\n\t\t\t\t\t\tthis.value = value;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tscope.searchOptions = {\n\t\t\t\t\toptions:[\n\t\t\t\t\t     {\n\t\t\t\t\t    \t name:\"All\",\n\t\t\t\t\t    \t value:\"All\"\n\t\t\t\t\t     },\n\t\t\t\t         {\n\t\t\t\t        \tname:\"Product Type\",\n\t\t\t\t        \tvalue:\"productType\"\n\t\t\t\t         },\n\t\t\t\t         {\n\t\t\t\t        \tname:\"Brand\",\n\t\t\t\t        \tvalue:\"brand\"\n\t\t\t\t         },\n\t\t\t\t         {\n\t\t\t\t        \tname:\"Products\",\n\t\t\t\t        \tvalue:\"product\"\n\t\t\t\t         },\n\t\t\t\t         {\n\t\t\t\t        \tname:\"Skus\",\n\t\t\t\t        \tvalue:\"sku\"\n\t\t\t\t         }\n\t\t\t\t\t],\n\t\t\t\t\tselected:{\n\t\t\t        \tname:\"All\",\n\t\t\t        \tvalue:\"All\"\n\t\t\t        },\n\t\t\t\t\tsetSelected:function(searchOption){\n\t\t\t\t\t\tthis.selected = searchOption;\n\t\t\t\t\t\tscope.productBundleGroupFilters.getFiltersByTerm(scope.productBundleGroupFilters.keyword,searchOption);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tscope.filterTemplatePath = productBundlePartialsPath+\"productbundlefilter.html\";\n\t\t\t\tscope.productBundleGroupFilters = {};\n\t\t\t\tscope.productBundleGroupFilters.value = [];\n\t\t\t\tif(angular.isUndefined(scope.productBundleGroup.productBundleGroupFilters)){\n\t\t\t\t\tscope.productBundleGroup.productBundleGroupFilters = [];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//Checks if a value has a match in an array\n\t\t\t\tfunction arrayContains(array, item){\n\t\t\t\t\tvar iterator = array.length;\n\t\t\t\t    while (iterator--) {\n\t\t\t\t       if (array[iterator].name === item.name){\n\t\t\t\t           return true;\n\t\t\t\t       }\n\t\t\t\t    }\n\t\t\t\t    return false;\n\t\t\t\t}\n\t\t\t\t /** Increases the current page count by one */\n                scope.increaseCurrentCount = function(){\n                      scope.currentPage++;\n                };\n                /** resets the current page to zero when the searchbox is changed */\n                scope.resetCurrentCount = function(){\n                      scope.currentPage = 1;\n                };\n                \n\t\t\t\tscope.productBundleGroupFilters.getFiltersByTerm = function(keyword,filterTerm){\n\t\t\t\t\tscope.loading = true;\n                    scope.showAll = true;\n\t\t\t\t\tvar _loadingCount;\n\t\t\t\t\tif(timeoutPromise) {\n\t\t\t\t\t\t$timeout.cancel(timeoutPromise);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\ttimeoutPromise = $timeout(function(){\n\t\t\t\t\t\tif(filterTerm.value === 'All'){\n\t\t\t\t\t\t\tscope.productBundleGroupFilters.value = [];\n\t\t\t\t\t\t\t_loadingCount = scope.searchOptions.options.length - 1;\n\t\t\t\t\t\t\tfor(var i in scope.searchOptions.options){\n\t\t\t\t\t\t\t\tif(i > 0){\n\t\t\t\t\t\t\t\t\tvar option = scope.searchOptions.options[i];\n\t\t\t\t\t\t\t\t\t(function(keyword,option) {\n                                        \n\t\t\t\t\t\t\t\t\t\t$slatwall.getEntity(scope.searchOptions.options[i].value, {keywords:keyword,deferKey:'getProductBundleGroupFilterByTerm'+option.value, currentPage:scope.currentPage, pageShow:scope.pageShow})\n                                            .then(function(value){\n                                            $log.debug(value);    \n                                            $log.debug(\"Total: \" + value.recordsCount);\n                                            $log.debug(\"Records Start: \" + value.pageRecordsStart);\n                                            $log.debug(\"Records End: \" + value.pageRecordsEnd);\n                                            \n\t\t\t\t\t\t\t\t\t\t\t var formattedProductBundleGroupFilters = productBundleService.formatProductBundleGroupFilters(value.pageRecords,option);\n\t\t\t\t\t\t\t\t\t\t\t     for(var j in formattedProductBundleGroupFilters){\n\t\t\t\t\t\t\t\t\t\t\t\t    if(!arrayContains(scope.productBundleGroup.data.skuCollectionConfig.filterGroups[0].filterGroup, formattedProductBundleGroupFilters[j])){\n\t\t\t\t\t\t\t\t\t\t\t\t\t   //Only get the correct amount for each iteration\n                                                        \n                                                        $log.debug(scope.productBundleGroupFilters.value.length);\n                                                        scope.productBundleGroupFilters.value.push(formattedProductBundleGroupFilters[j]);\n\t\t\t\t\t\t\t\t\t\t\t\t       \n                                                    \n                                                    }   \n\t\t\t\t\t\t\t\t\t\t\t     }\n\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t// Increment Down The Loading Count\n\t\t\t\t\t\t\t\t\t\t\t_loadingCount--;\n\t\t\t\t\t\t\t\t\t\t\t// If the loadingCount drops to 0, then we can update scope\n\t\t\t\t\t\t\t\t\t\t\tif(_loadingCount == 0){\n\t\t\t\t\t\t\t\t\t\t\t\t//This sorts the array of objects by the objects' \"type\" then \"name\"\n                                                scope.productBundleGroupFilters.value = utilityService.arraySorter(scope.productBundleGroupFilters.value, [\"type\",[\"name\",\"asc\"]]);                               \n\t\t\t\t\t\t\t\t\t\t\t\t$log.debug(scope.productBundleGroupFilters.value);\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t}\n                                            scope.loading = false;\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t})(keyword,option);\n\t\t\t\t\t\t\t\t} \n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n                            \n                             scope.showAll = false; //We want to display a count when using specific filter type so, set to false.\n\t\t\t\t\t\t\t$slatwall.getEntity(filterTerm.value, { keywords: keyword, deferKey:'getProductBundleGroupFilterByTerm' + filterTerm.value, currentPage:scope.currentPage, pageShow:scope.pageShow})\n\t\t\t\t\t\t\t.then(function(value){\n                                \n                                scope.recordsCount = value.recordsCount;\n                                scope.pageRecordsStart = value.pageRecordsStart;\n                                scope.pageRecordsEnd = value.pageRecordsEnd;\n\t\t\t\t\t\t\t\t$log.debug('getFiltersByTerm');\n\t\t\t\t\t\t\t\t$log.debug(value);\n\t\t\t\t\t\t\t\tscope.productBundleGroupFilters.value = productBundleService.formatProductBundleGroupFilters(value.pageRecords,filterTerm) || [];\n\t\t\t\t\t\t\t\tscope.loading = false;\n\t\t\t\t\t\t\t\t$log.debug('productBundleGroupFilters');\n\t\t\t\t\t\t\t\t$log.debug(scope.productBundleGroupFilters);\n\t\t\t\t\t\t\t\tscope.loading = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 500);\n\t\t\t\t};\n \n\t\t\t\tscope.addFilterToProductBundle = function(filterItem,include,index){\n\t\t\t\t\t$log.debug('addFilterToProductBundle');\n\t\t\t\t\t$log.debug(filterItem);\n\t\t\t\t\tvar collectionFilterItem = {};\n                    collectionFilterItem.name = filterItem.name;\n                    collectionFilterItem.type = filterItem.type;\n\t\t\t\t\tcollectionFilterItem.displayPropertyIdentifier = filterItem.type; \n\t\t\t\t\tcollectionFilterItem.propertyIdentifier = filterItem.propertyIdentifier; \n\t\t\t\t\tcollectionFilterItem.displayValue = filterItem[filterItem.entityType.charAt(0).toLowerCase() + filterItem.entityType.slice(1)+'ID']; \n\t\t\t\t\tcollectionFilterItem.value = filterItem[filterItem.entityType.charAt(0).toLowerCase() + filterItem.entityType.slice(1)+'ID']; \n\t\t\t\t\t\n\t\t\t\t\tif(include === false){\n\t\t\t\t\t\tcollectionFilterItem.comparisonOperator = '!=';\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcollectionFilterItem.comparisonOperator = '=';\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(scope.productBundleGroup.data.skuCollectionConfig.filterGroups[0].filterGroup.length > 0){\n\t\t\t\t\t\tcollectionFilterItem.logicalOperator = 'OR';\n\t\t\t\t\t}\n\t\t\t\t\t//Adds filter item to designated filtergroup\n\t\t\t\t\tscope.productBundleGroup.data.skuCollectionConfig.filterGroups[0].filterGroup.push(collectionFilterItem);\n\t\t\t\t\t//Removes the filter item from the left hand search result\n\t\t\t\t\tscope.productBundleGroupFilters.value.splice(index,1);\n                    scope.productBundleGroup.forms[scope.formName].skuCollectionConfig.$setDirty();\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\tif(angular.isUndefined(scope.filterPropertiesList)){\n\t\t\t\t\tscope.filterPropertiesList = {};\n\t\t\t\t\tvar filterPropertiesPromise = $slatwall.getFilterPropertiesByBaseEntityName('_sku');\n\t\t\t\t\tfilterPropertiesPromise.then(function(value){\n\t\t\t\t\t\tmetadataService.setPropertiesList(value,'_sku');\n\t\t\t\t\t\tscope.filterPropertiesList['_sku'] = metadataService.getPropertiesListByBaseEntityAlias('_sku');\n\t\t\t\t\t\tmetadataService.formatPropertiesList(scope.filterPropertiesList['_sku'],'_sku');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tscope.removeProductBundleGroupFilter = function(index){\n\t\t\t\t\t//Pushes item back into array\n\t\t\t\t\tscope.productBundleGroupFilters.value.push(scope.productBundleGroup.data.skuCollectionConfig.filterGroups[0].filterGroup[index]);\n\t\t\t\t\t//Sorts Array\n\t\t\t\t\tscope.productBundleGroupFilters.value = utilityService.arraySorter(scope.productBundleGroupFilters.value, \"type\");\n\t\t\t\t\t//Removes the filter item from the filtergroup\n\t\t\t\t\tscope.productBundleGroup.data.skuCollectionConfig.filterGroups[0].filterGroup.splice(index,1);\n                    scope.productBundleGroup.forms[scope.formName].skuCollectionConfig.$setDirty();\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t\n\t\t\t}\n\t\t};\n\t}\n]);\n\t\n"]}