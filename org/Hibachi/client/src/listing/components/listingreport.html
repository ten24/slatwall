
<div id="reporting-top">
    <div class="alert alert-error" ng-show="swListingReport.hasMetric==false">You must have an aggregate column to render the report</div>
    
    <div class="flex flex-space-between">
        <div class="col">
    		<!--- <select 
    		    ng-model="swListingReport.selectedPeriodInterval"
    			ng-options="periodInterval as periodInterval.value for periodInterval in swListingReport.periodIntervals track by periodInterval.value"
    			ng-change="swListingReport.updatePeriod()"
            >
    		</select> --->
    		
    		<!-- TODO: Backend - Wireup new period interval UI -->
    		<div class="btn-group btn-group-sm" role="group" aria-label="...">
              <button type="button" class="btn btn-default">Hour</button>
              <button type="button" class="btn btn-default">Day</button>
              <button type="button" class="btn btn-default">Week</button>
              <button type="button" class="btn btn-default">Month</button>
              <button type="button" class="btn btn-default">Year</button>
            </div>
    	</div>
    	
        <div class="col">
            <div class="flex flex-align-right">
        		
        		<div class="col">
                    <a href="##" ng-click="swListingReport.popObjectPath()" class="btn btn-sm btn-default btn-back">Back</a>
            	</div>
            	
            	<div class="col save-btn">
            	    <span class="input-group-btn s-action" ng-click="swListingReport.saveReportCollection()">
                        <button ng-if="$root.slatwall.account.accountID" class="btn btn-sm dropdown-toggle btn-primary"
                            type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"
                        >
                            Save <i class="fa fa-floppy-o"></i>
                        </button>
                        <ul class="dropdown-menu pull-right" ng-show="swListingReport.collectionNameSaveIsOpen">
                            <li style="padding:8px;">
                                <div class="s-form-input s-input-group s-edit" style="width:100px;">
                                    <input
                                        type="text"
                                        ng-model="swListingReport.collectionName"
                                        class="form-control" placeholder=""
                                        style="display: inline-block !important;
                                        height: 22px !important;
                                        vertical-align: bottom !important;
                                        font-size: 12px;
                                        padding: 0px 5px;"
                                    >
                                    <a class="btn btn-xs btn-success s-action-btn"
                                        ng-click="swListingReport.saveReportCollection(swListingReport.collectionName)">
                                        save
                                    </a>
                                </div>
                            </li>
                        </ul>
                    </span>
                </div><!-- end of .col -->
        	</div><!-- end of .flex-align-right -->
    	</div><!-- end of .col -->
    </div><!-- end of .flex -->
    
    <div class="flex flex-align-left">
    	
    	<div class="col">
    		<div style="margin-bottom:5px;">
    		    <label>Metrics</label>
    			<select 
    			    ng-model="swListingReport.selectedPeriodColumn" 
    			    ng-options="periodColumn as periodColumn.displayPropertyIdentifier
                                for periodColumn in swListingReport.periodColumns
                                 | orderBy:['displayPropertyIdentifier'] track by periodColumn.propertyIdentifier
                    "
                    ng-change="swListingReport.selectPeriodColumn(swListingReport.selectedPeriodColumn)"
                >
    				
    			</select>
    		</div>
    	</div>
    	
		<div class="col">
		
			<div class="flex flex-cal">
    			<div class="col-cal">
                    <p class="input-group s-datepicker">
                        <label>Start Date</label>
                        <input class="form-control" 
                      		datepicker-popup="MMM dd, yyyy hh:mm a" 
                      		close-text="Close" 
                      		is-open="swListingReport.openedCalendarStart" 
                      		type="text"
                      		ng-model="swListingReport.startDate"
                      		ng-change="swListingReport.updatePeriod()"
                      		/>
                        <span class="input-group-btn" >
                            <button type="button" class="btn btn-default btn-sm btn-cal" ng-click="swListingReport.openCalendarStart($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                        </span>
                    </p>
                </div>
                <div class="col-cal">
                    <p class="input-group s-datepicker">
                        <label>End Date</label>
                        <input class="form-control" 
                      		datepicker-popup="MMM dd, yyyy hh:mm a" 
                      		close-text="Close" 
                      		is-open="swListingReport.openedCalendarEnd" 
                      		type="text"
                      		ng-model="swListingReport.endDate"
                      		ng-change="swListingReport.updatePeriod()"
                      		/>
                        <span class="input-group-btn" >
                            <button type="button" class="btn btn-default btn-sm btn-cal" ng-click="swListingReport.openCalendarEnd($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                        </span>
                    </p>
                    <a href="#" id="hibachi-report-enable-compare" class="pull-right">+ Compare Dates</a>
                </div>
                
                <input type="hidden" name="reportCompareFlag" value="0">
        		<div id="hibachi-report-compare-date" class="hide flex compare">
        		    <span><i class="fa fa-arrows-h" style="margin-top: 30px;padding-left: 10px;font-size: 17px;"></i></span>
        			<div class="col-cal">
                        <p class="input-group s-datepicker">
                            <label>Start Date</label>
                            <input class="form-control" 
                          		datepicker-popup="MMM dd, yyyy hh:mm a" 
                          		close-text="Close" 
                          		is-open="swListingReport.openedCalendarStartCompare" 
                          		type="text"
                          		ng-change="swListingReport.updatePeriod()"
                          		ng-model="swListingReport.startDateCompare"/>
                            <span class="input-group-btn" >
                                <button type="button" class="btn btn-default btn-sm btn-cal" ng-click="swListingReport.openCalendarStartCompare($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                            </span>
                        </p>
                    </div>
                    <div class="col-cal">
                        <p class="input-group s-datepicker">
                            <label>End Date</label>
                            <input class="form-control" 
                          		datepicker-popup="MMM dd, yyyy hh:mm a" 
                          		close-text="Close" 
                          		is-open="swListingReport.openedCalendarEndCompare" 
                          		type="text"
                         		ng-change="swListingReport.updatePeriod()"
                          		ng-model="swListingReport.endDateCompare"/>
                            <span class="input-group-btn" >
                                <button type="button" class="btn btn-default btn-sm btn-cal" ng-click="swListingReport.openCalendarEndCompare($event)"><i class="glyphicon glyphicon-calendar"></i></button>
                            </span>
                        </p>
                    </div>
        		</div>
            </div><!-- end of .flex-cal -->
            
    	</div><!-- end of .col -->
	</div><!-- end of .row -->
	
	<div id="chartContainer">
        <canvas id="myChart" class="myChart" width="2400" height="600" ng-show="swListingReport.reportingData"></canvas>
        <canvas id="myChartCompare" class="myChart" width="2400" height="600" ng-show="swListingReport.compareReportingData"></canvas>
    </div>
</div>